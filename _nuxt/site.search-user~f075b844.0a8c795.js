(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{1060:function(t,e,n){"use strict";n.r(e);n(207);var r={name:"Loading",props:{loading:{type:Boolean,default:!1},fontSize:{type:Number,default:32}}},o=(n(1062),n(12)),component=Object(o.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"loading-container"},[this._v("\n  "+this._s(this.$t("discuzq.list.loading"))+"...\n")])}),[],!1,null,"3b6d3448",null);e.default=component.exports},1061:function(t,e,n){"use strict";n(977)},1062:function(t,e,n){"use strict";n(978)},1110:function(t,e,n){},1159:function(t,e,n){"use strict";n(1110)},1166:function(t,e,n){"use strict";n.r(e);var r=n(79),o=(n(32),n(873)),c={name:"Category",mixins:[n.n(o).a],props:{postLoading:{type:Boolean,default:!1},list:{type:Array,default:function(){return[]}}},data:function(){return{categoryList:[],selectId:0,selectId_parent:0}},watch:{list:{handler:function(t){0===this.categoryList.length&&this.handleData(t)},deep:!0}},mounted:function(){0===this.categoryList.length&&this.getCategoryList(),this.$route.params.id&&(this.selectId=+this.$route.params.id)},methods:{getCategoryList:function(){var t=this;this.$store.dispatch("jv/get",["categories",{}]).then((function(e){var n=Object(r.a)(e)||[];t.handleData(n)}),(function(e){t.handleError(e)}))},handleData:function(data){var t=this,e=0;this.categoryList=[],data.forEach((function(n){var r=!1,o=[];e+=n.thread_count,n.children&&n.children.length>0&&(r=!0,n.children.forEach((function(t){o.push({id:parseInt(t.id),search_ids:t.search_ids,name:t.name,thread_count:t.thread_count})}))),t.categoryList.push({id:parseInt(n._jv.id),search_ids:n.search_ids,name:n.name,thread_count:n.thread_count,hasChild:r,children:o})})),this.categoryList.unshift({id:0,search_ids:"0",name:this.$t("topic.whole"),thread_count:e}),this.categoryList.forEach((function(e){e.id===t.selectId?t.selectId_parent=e.id:e.children&&e.children.forEach((function(n){n.id===t.selectId&&(t.selectId_parent=e.id)}))}))},onChange:function(t,e,n){this.postLoading||(this.selectId=t,this.selectId_parent=e,this.$emit("onChange",{id:t,search_ids:n}))}}},l=(n(1159),n(12)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.categoryList.length>0?n("div",{staticClass:"category-container"},t._l(t.categoryList,(function(e){return n("div",{key:e.id},[n("div",{staticClass:"category-item",class:{active:t.selectId===e.id||t.selectId_parent===e.id,loading:t.postLoading},on:{click:function(n){return t.onChange(e.id,e.id,e.search_ids)}}},[t.selectId_parent===e.id?n("i",{staticClass:"el-icon-arrow-left arrow-icon"}):t._e(),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"count"},[t._v(t._s(e.thread_count))])]),t._v(" "),e.hasChild?n("div",t._l(e.children,(function(r){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.selectId_parent===e.id,expression:"selectId_parent === item.id"}],key:r.id,staticClass:"category-item category-item-sub",class:{active:t.selectId===r.id,loading:t.postLoading},on:{click:function(n){return t.onChange(r.id,e.id,r.search_ids)}}},[n("div",{staticClass:"title"},[t._v(t._s(r.name))]),t._v(" "),n("div",{staticClass:"count"},[t._v(t._s(r.thread_count))])])})),0):t._e()])})),0):t._e()}),[],!1,null,"3f283c3e",null);e.default=component.exports},1224:function(t,e,n){},1340:function(t,e,n){"use strict";n(1224)},1444:function(t,e,n){"use strict";n.r(e);n(17),n(13),n(18),n(23),n(24);var r=n(79),o=n(7),c=n(9),l=(n(14),n(32),n(20),n(873)),d=n.n(l),h=n(212),head=n(874),_=n.n(head);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={layout:"custom_layout",name:"SearchUser",mixins:[d.a,_.a],asyncData:function(t,e){return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.store,h.a.isSpider||e(null,{}),n.prev=2,o={},n.next=6,r.dispatch("jv/get",["categories",{}]);case 6:c=n.sent,Array.isArray(c)?o.categoryData=c:c&&c._jv&&c._jv.json&&((l=c._jv.json.data||[]).forEach((function(t,e){l[e]=m(m(m({},t),t.attributes),{},{_jv:{id:t.id}})})),o.categoryData=l),e(null,o),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),e(null,{});case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))()},data:function(){return{loading:!1,categoryData:[],pageNum:1,pageSize:10,categoryId:0,value:"",hasMore:!1,userCount:0,userList:[],title:this.$t("search.search")}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},watch:{$route:"init"},mounted:function(){this.init()},methods:{init:function(){this.$route.query.categoryId&&(this.categoryId=this.$route.query.categoryId),this.$route.query.value&&(this.value=this.$route.query.value,this.reloadList())},getUserList:function(){var t=this;this.loading=!0;var e={include:"groups",sort:"createdAt","filter[status]":"normal","page[limit]":this.pageSize,"page[number]":this.pageNum,"filter[username]":"*".concat(this.value,"*")};this.$store.dispatch("jv/get",["users",{params:e}]).then((function(e){var data=e;e&&data.forEach((function(t,i){data[i].groupName=t.groups[0]?t.groups[0].name:""})),t.userCount=data._jv.json.meta.total,t.hasMore=data.length===t.pageSize,1===t.pageNum?t.userList=data:t.userList=[].concat(Object(r.a)(t.userList),Object(r.a)(data)),t.pageNum+=1,data._jv&&(t.hasMore=t.userList.length<data._jv.json.meta.total)}),(function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},loadMore:function(){this.getUserList()},reloadList:function(){this.pageNum=1,this.userList=[],this.getUserList()}}},y=(n(1340),n(12)),component=Object(y.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("main",{staticClass:"cont-left"},[n("div",{staticClass:"search-header"},[n("div",{staticClass:"result-count"},[t._v("\n        "+t._s(t.$t("search.find"))+" "),t.value?n("span",{staticClass:"keyword"},[t._v('"'+t._s(t.value)+'"')]):t._e(),t._v("\n        "+t._s(t.$t("search.searchuserresult"))+" "+t._s(t.userCount)+" "+t._s(t.$t("topic.item"))+"\n      ")]),t._v(" "),n("create-post-popover")],1),t._v(" "),n("div",{staticClass:"user-list"},[n("div",{staticClass:"user-flex"},t._l(t.userList,(function(t,e){return n("user-item",{key:e,attrs:{item:t}})})),1),t._v(" "),n("list-load-more",{attrs:{loading:t.loading,"has-more":t.hasMore,"page-num":t.pageNum,length:t.userList.length,"load-more-text":t.$t("topic.showMore")+t.$t("search.users")},on:{loadMore:t.loadMore}})],1)]),t._v(" "),n("aside",{staticClass:"cont-right"},[n("div",{staticClass:"category background-color"},[n("category-pay",{attrs:{list:t.categoryData}})],1),t._v(" "),n("advertising"),t._v(" "),n("copyright",{attrs:{forums:t.forums}})],1)])}),[],!1,null,"1347ac91",null);e.default=component.exports;installComponents(component,{CreatePostPopover:n(956).default,UserItem:n(904).default,ListLoadMore:n(890).default,CategoryPay:n(1166).default,Advertising:n(948).default,Copyright:n(949).default})},874:function(t,e){t.exports={data:function(){return{title:"‎"}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},head:function(){return{title:"‎"!==this.title&&this.forums&&this.forums.set_site&&this.forums.set_site.site_name?"".concat(this.title," - ").concat(this.forums.set_site.site_name):this.title}}}},881:function(t,e,n){},890:function(t,e,n){"use strict";n.r(e);n(207);var r={name:"ListLoadMore",mixins:[{data:function(){return{scrollTop:0}},mounted:function(){this.addEventListener(window,"scroll",this.handleScroll)},destroyed:function(){this.removeEventListener(window,"scroll",this.handleScroll)},methods:{handleScroll:function(){var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,n=document.documentElement.scrollHeight||document.body.scrollHeight;this.scrollData(),Math.ceil(n-e)>=20&&this.scrollPost(),Math.ceil(t+e+10)>=200&&this.scrollLoadMore(),this.scrollTop=t},addEventListener:function(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on".concat(e),n)},removeEventListener:function(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on".concat(e),n)}}}],props:{loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!1},pageNum:{type:[Number,String],default:1},length:{type:[Number,String],default:0},surplus:{type:[Number,String],default:0},loadMoreText:{type:String,default:function(){return this.$t("topic.showMore")}}},methods:{scrollLoadMore:function(){(this.pageNum-1)%5>0&&!this.loading&&this.hasMore&&this.loadMore()},scrollData:function(){this.$emit("scrollDdata")},scrollPost:function(){this.$emit("scrollPost")},loadMore:function(){this.$emit("loadMore")}}},o=(n(1061),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"load-more-container"},[t.loading?n("loading"):[t.hasMore&&(t.pageNum-1)%5==0?n("div",{staticClass:"load-more",on:{click:t.loadMore}},[t._v("\n      "+t._s(t.surplus>0?t.$t("notice.checkMore",{surplus:t.surplus}):t.loadMoreText)+"\n    ")]):t.hasMore&&(t.pageNum-1)%5>0?n("loading"):n("div",{staticClass:"no-more"},[0===t.length?n("svg-icon",{staticClass:"empty-icon",attrs:{type:"empty"}}):t._e(),t._v("\n      "+t._s(t.length>0?t.$t("discuzq.list.noMoreData"):t.$t("discuzq.list.noData"))+"\n    ")],1)]],2)}),[],!1,null,"63563751",null);e.default=component.exports;installComponents(component,{Loading:n(1060).default,SvgIcon:n(78).default})},892:function(t,e,n){},900:function(t,e,n){"use strict";n(881)},904:function(t,e,n){"use strict";n.r(e);var r={name:"UserItem",props:{item:{type:Object,default:function(){}},show:{type:String,default:"all"},isFollow:{type:Boolean,default:!1}},data:function(){return{}},methods:{toUser:function(){this.$router.push("/user/".concat(this.item.id))}}},o=(n(900),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-item-container",class:{simple:"simple"===t.show}},[n("div",{staticClass:"flex user-item",on:{click:function(e){return e.stopPropagation(),t.toUser(e)}}},[n("avatar",{attrs:{user:t.item,size:"simple"===t.show?40:45,round:!0}}),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"flex"},[n("span",{staticClass:"name text-hidden"},[t._v(t._s(t.item.username))]),t._v(" "),"all"===t.show&&t.item.groupName?n("span",{staticClass:"role"},[t._v(t._s(t.item.groupName))]):t._e()]),t._v(" "),n("div",{staticClass:"flex count"},["all"===t.show?n("div",{staticClass:"count-item"},[t._v(t._s(t.$t("profile.topic"))+" "+t._s(t.item.threadCount||0))]):t._e(),t._v(" "),"all"===t.show?n("div",{staticClass:"count-item"},[t._v(t._s(t.$t("profile.following"))+" "+t._s(t.item.followCount||0))]):t._e(),t._v(" "),n("div",{staticClass:"count-item"},[t._v(t._s(t.$t("profile.followers"))+" "+t._s(t.item.fansCount||0))])])])],1),t._v(" "),t.isFollow?n("el-button",{staticClass:"follow",attrs:{type:"text"}},[t._v("\n    "+t._s(t.$t("profile.following"))+"\n  ")]):t._e()],1)}),[],!1,null,"ee325c6e",null);e.default=component.exports;installComponents(component,{Avatar:n(344).default})},950:function(t,e,n){"use strict";n(892)},956:function(t,e,n){"use strict";n.r(e);var r=n(208),o={name:"CreatePostPopover",mixins:[n.n(r).a],data:function(){return{userId:this.$store.getters["session/get"]("userId"),visible:!1,noCreateThread:!1,can_create_thread:!0,can_create_thread_long:!0,can_create_thread_video:!0,can_create_thread_image:!0,can_create_thread_question:!0,can_create_thread_goods:!0,can_create_thread_ask:!0}},computed:{userInfo:function(){return this.$store.getters["jv/get"]("/users/".concat(this.userId))},forums:function(){return this.$store.state.site.info.attributes||{}},categoryId:function(){return this.$route.query.categoryId},types:function(){return this.$route.query.url},www:function(){return this.$route.path}},methods:{showAndHidePopover:function(){var t=this;if(this.$store.getters["session/get"]("isLogin")){if(!this.visible){var e=this.forums.other,n=this.userInfo;if(!e)return;if(!(e.can_create_thread||e.can_create_thread_long||e.can_create_thread_video||e.can_create_thread_image||e.can_create_thread_question||e.can_create_thread_goods||e.can_create_thread_ask))return this.$message.error(this.$t("home.noPostingPermission")),void this.$router.push("/my/vip");if(e.publish_need_real_name&&!n.realname)return void this.$message.error(this.$t("home.needRealname"));if(e.publish_need_bind_phone&&!n.mobile)return void this.$message.error(this.$t("home.needPhone"));if(!e.can_create_thread_in_category)return void this.$message.error(this.$t("home.noPostingCategory"));if(this.categoryId)this.$store.getters["jv/get"]("categories/".concat(this.categoryId)).canCreateThread||this.$message.error(this.$t("home.noPostingCategory"));e.can_create_thread||(this.can_create_thread=!1),e.can_create_thread_long||(this.can_create_thread_long=!1),e.can_create_thread_video||(this.can_create_thread_video=!1),e.can_create_thread_image||(this.can_create_thread_image=!1),e.can_create_thread_question||(this.can_create_thread_question=!1),e.can_create_thread_goods||(this.can_create_thread_goods=!1),e.can_create_thread_ask||(this.can_create_thread_ask=!1)}this.visible=!this.visible}else this.$message.warning("请登录"),window.setTimeout((function(){t.headerTologin()}),1e3)},toRouter:function(t){this.$router.push("/thread/postpay?type=".concat(t).concat(this.categoryId?"&categoryId=".concat(this.categoryId):""))}}},c=(n(950),n(12)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-popover",{attrs:{placement:"bottom",width:"120","min-width":"120",trigger:"manual","popper-class":"custom-popover-width"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("ul",{staticClass:"type-container"},[t.can_create_thread?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(0)}}},[t._v("\n        "+t._s(t.$t("home.word"))+"\n      ")]):t._e(),t._v(" "),t.can_create_thread_long?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(1)}}},[t._v("\n        "+t._s(t.$t("home.invitation"))+"\n      ")]):t._e(),t._v(" "),t.can_create_thread_image?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(3)}}},[t._v("\n        "+t._s(t.$t("home.picture"))+"\n      ")]):t._e(),t._v(" "),t.can_create_thread_video?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(2)}}},[t._v("\n        "+t._s(t.$t("home.video"))+"\n      ")]):t._e(),t._v(" "),t.can_create_thread_question?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(5)}}},[t._v("\n        "+t._s(t.$t("home.question"))+"\n      ")]):t._e(),t._v(" "),t.can_create_thread_goods?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(6)}}},[t._v("\n        "+t._s(t.$t("home.product"))+"\n      ")]):t._e(),t._v(" "),t.can_create_thread_ask?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(14)}}},[t._v("\n        "+t._s(t.$t("home.ask"))+"\n      ")]):t._e()]),t._v(" "),n("template",{slot:"reference"},[t._t("button",[n("el-button",{staticClass:"new-post",attrs:{type:"primary"},on:{click:t.showAndHidePopover}},[t._v("\n          \n          \n          "+t._s(t.$t("profile.post"))),n("span",{staticClass:"add-icon"},[t._v("+")])])])],2)],2)],1)}),[],!1,null,"b4f15e32",null);e.default=component.exports},977:function(t,e,n){},978:function(t,e,n){}}]);