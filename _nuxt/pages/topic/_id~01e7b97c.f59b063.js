(window.webpackJsonp=window.webpackJsonp||[]).push([[45,7],{1050:function(t,e,n){"use strict";n(962)},1263:function(t,e,n){},1382:function(t,e,n){"use strict";n(1263)},1467:function(t,e,n){"use strict";n.r(e);n(17),n(13),n(18),n(23),n(24);var o=n(79),r=n(7),c=n(9),l=(n(20),n(45),n(14),n(873)),d=n.n(l),m=n(212);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f="user,user.groups,firstPost,firstPost.images,category,threadVideo,question,question.beUser,question.beUser.groups,firstPost.postGoods,threadAudio",_={layout:"custom_layout",name:"TopicIndex",mixins:[d.a],asyncData:function(t,e){return Object(c.a)(regeneratorRuntime.mark((function n(){var o,r,c,l,d,h,_,y,A,C;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.store,r=t.params,m.a.isSpider||e(null,{}),c={include:f,"filter[isApproved]":1,"filter[isDeleted]":"no","filter[isDisplay]":"yes","page[limit]":10,"filter[topicId]":r.id},l={include:"groups",limit:4},n.prev=4,d={},n.next=8,o.dispatch("jv/get",["topics/".concat(r.id),{}]);case 8:return h=n.sent,n.next=11,o.dispatch("jv/get",["threads",{params:c}]);case 11:return _=n.sent,n.next=14,o.dispatch("jv/get",["users/recommended",{params:l}]);case 14:y=n.sent,d.topic=v({},h),Array.isArray(_)?d.threadsData=_.slice(0,10):_&&_._jv&&_._jv.json&&((A=_._jv.json.data||[]).forEach((function(t,e){A[e]=v(v(v({},t),t.attributes),{},{firstPost:t.relationships&&t.relationships.firstPost&&t.relationships.firstPost.data,user:t.relationships&&t.relationships.user&&t.relationships.user.data,groups:t.relationships&&t.relationships.groups&&t.relationships.groups.data,_jv:{id:t.id}})})),d.threadsData=A),Array.isArray(y)?d.recommendUserData=y:y&&y._jv&&y._jv.json&&((C=y._jv.json.data||[]).forEach((function(t,e){C[e]=v(v({},t),t.attributes)})),d.recommendUserData=C),e(null,d),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(4),e(null,{});case 24:case"end":return n.stop()}}),n,null,[[4,21]])})))()},data:function(){return{loading:!1,threadsData:[],total:0,recommendUserData:[],pageNum:1,pageSize:10,hasMore:!1,topicId:"",topic:{},currentAudioId:""}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},watch:{$route:"init"},mounted:function(){this.init()},methods:{init:function(){this.threadsData=[],this.$route.params&&this.$route.params.id&&(this.topicId=this.$route.params.id,this.getTopicDetail(this.$route.params.id),this.getThreadsList())},getTopicDetail:function(t){var e=this;this.$store.dispatch("jv/get",["topics/".concat(t),{}]).then((function(t){t&&(e.topic=t)}))},getThreadsList:function(){var t=this;this.loading=!0;var e={include:f,"filter[isApproved]":1,"filter[isDeleted]":"no","filter[isDisplay]":"yes","page[number]":this.pageNum,"page[limit]":this.pageSize,"filter[topicId]":"".concat(this.topicId)};this.$store.dispatch("jv/get",["threads",{params:e}]).then((function(e){t.hasMore=e.length===t.pageSize,t.total=e._jv.json.meta.threadCount,1===t.pageNum?(t.threadsData=e,!t.address&&e.length>0&&(t.address=e[0].address),!t.location&&e.length>0&&(t.location=e[0].location)):t.threadsData=[].concat(Object(o.a)(t.threadsData),Object(o.a)(e)),t.pageNum+=1,e._jv&&(t.hasMore=t.threadsData.length<e._jv.json.meta.threadCount)}),(function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},loadMore:function(){this.getThreadsList()},audioPlay:function(t){this.currentAudioId&&this.currentAudioId!==t&&this.$refs["audio".concat(this.currentAudioId)][0].pause(),this.currentAudioId=t}},head:function(){return{title:this.forums&&this.forums.set_site&&this.forums.set_site.site_name?"".concat(this.topic.content," - ").concat(this.forums.set_site.site_name):this.topic.content,meta:[{hid:"description",name:"description",content:this.topic.content||""}]}}},y=(n(1382),n(12)),component=Object(y.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topic-content-container"},[n("div",{staticClass:"container"},[n("main",{staticClass:"cont-left"},[n("div",{staticClass:"topic-detail"},[n("div",{staticClass:"title"},[t._v("\n          #"),n("span",{staticClass:"topic-name"},[t._v(t._s(t.topic.content))]),t._v("#\n          "),1===t.topic.recommended?n("svg-icon",{attrs:{type:"recommend"}}):t._e()],1),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"item"},[t._v("\n            "+t._s(t.$t("home.topicCount",{total:t.topic.thread_count}))+"\n          ")]),t._v(" "),n("div",{staticClass:"item"},[t._v("\n            "+t._s(t.$t("home.topicViewCount",{total:t.topic.view_count}))+"\n          ")]),t._v(" "),n("share-popover",{attrs:{type:"topic"}},[n("div",{staticClass:"item hover"},[n("svg-icon",{staticClass:"icon",attrs:{type:"link"}}),t._v("\n              "+t._s(t.$t("topic.share"))+"\n            ")],1)]),t._v(" "),n("nuxt-link",{staticClass:"item hover",attrs:{to:"/topic/list"}},[t._v(t._s(t.$t("topic.allTopics")))])],1)]),t._v(" "),n("div",{staticClass:"thread-list"},[t._l(t.threadsData,(function(e,o){return[4===e.type?n("post-item-pay",{key:o,ref:"audio"+(e&&e.threadAudio&&e.threadAudio._jv&&e.threadAudio._jv.id),refInFor:!0,attrs:{item:e},on:{audioPlay:t.audioPlay}}):n("post-item-pay",{key:o,attrs:{item:e}})]})),t._v(" "),n("list-load-more",{attrs:{loading:t.loading,"has-more":t.hasMore,"page-num":t.pageNum,length:t.threadsData.length},on:{loadMore:t.loadMore}})],2)]),t._v(" "),n("aside",{staticClass:"cont-right"},[n("div",{staticClass:"background-color"},[n("advertising")],1),t._v(" "),n("div",{staticClass:"recommend-user background-color"},[n("recommend-user",{attrs:{list:t.recommendUserData}})],1),t._v(" "),n("copyright",{attrs:{forums:t.forums}})],1)])])}),[],!1,null,"024da940",null);e.default=component.exports;installComponents(component,{SvgIcon:n(78).default,SharePopover:n(887).default,PostItem:n(957).default,PostItemPay:n(958).default,ListLoadMore:n(890).default,Advertising:n(948).default,RecommendUser:n(911).default,Copyright:n(949).default})},875:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return c}));n(66),n(209);var o=function(time){var t=((window.currentTime||new Date)-new Date(time))/1e3;return 0===parseInt(t)?"刚刚发布":parseInt(t)<60?"".concat(parseInt(t),"秒前"):parseInt(t/60)<60?"".concat(parseInt(t/60),"分钟前"):parseInt(t/60/60)<16?"".concat(parseInt(t/60/60),"小时前"):time.replace(/T/," ").replace(/Z/,"").substring(0,16)},r=function(t){var e=t-Math.round(new Date/1e3);return parseInt(e/86400,0)},c=function(t){var e=Math.round(new Date(t)/1e3),n=Math.round(new Date/1e3)-e,o=parseInt(n/86400,0);if(o>365){var r=parseInt(n/86400/365,0);return"".concat(r,"年")}return"".concat(o,"天")}},881:function(t,e,n){},883:function(t,e,n){},885:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABCCAMAAADQfyDnAAAARVBMVEVHcEz/1t7/MF//M2D/TXL/YoH/d5H/NWP/8/X/2N/+HlX/H1b/+Pr/kqb/sb//NWL/197/W3z/fJX/5On/n7H/ydP/R22l4cNJAAAACnRSTlMAM4RE1sCo5g4grga5YgAAAxZJREFUWMOllol26yAMRPW6pR12vPz/pz6BDRbYTe3YPUmT2LoMIwmgD6Wg0iu9pwtYvtcfxCc03x5vP0T0tUUKiohuLpR3pHHweM+E9lY3WMbKkddRkG88fiqhPFafwhot7rRPZBlvJDRgJx/Vky68gPEgKj5gk4jNWDQOF0WqmADQSliN2RmQ/9sZO1+LZ0SbBiFOyYg4qHGEwlE2CqD4IAJRDRii9a5xpKSF/6gniHTl12yd4fioqjWtpdQQ0AhcVE/WDmYazGF9QQC+v1Q/QiYYPcyTcX6sNdEMQ0TdLNZn8u05Wq2tH+FG542LS7YhK1MCsgbZGqOezDA4Zy28dcPgpYfYA4g+mxJUwYVh9Dyutc5br43aNygdE9ZqCxyjo7OsIeop6LDvzw7w/SkKUKV4+Nl7HzxbYcIQ2lrZA5iw9YRKuWMVerZMMIyLVkxi6Vc6IIhlI8Vb452dOAthEstWKRQ6IEiZHD84rkRrg+5rKWugQ0JtWsdRSYBV3gYbxsjXGCWF6DcNyyDsGvIUNGfTeK2190a2Lf1GKEufikZxAtYMmpQXUSk4BkgNHBPVsMSjxEeHsgMQPdFQCJ7zb1wefwwclpjPPGg1AHHkYM6Em6KaNFuZ8oFuRTqqh6Vz18Jy3uc+jRP3J7aFj4hOzCJ94nbKMZYrQ09jKWp6TpCVnwjW5HyEkfXgqQeZ8IFml+UVQQejZ7l/PQUwoel+x+qzmyyhLpxEf2ool+MVJflvPS90M35tpp2G1QROg8srBAuZ5rrdEZ3TwO+pGhCTBifcJTqhQW4VKQsQhwk6Rag7dtonJrm94G8A/XxsRwWF7uRwBpAIUM1BTBwAiC5oQLOtLpsM0XkN/RnopIlVQz2cQR5D6BKhP8idV7BpwLainynlnZPdafeCgpWA7uQMukJ4iFoqLtJVQnMEuTaFQkBzYKPrhKYergIEYcklrgLo36PtK3qFIE5BLwDSLLaDIl4ALLMAXp1C9eEGgAmX23lPgFKXS3mXi5enIHygGwTcA6wa6BYBuAXIGugewd0EMIHuEv4DyXJgDPfCK6IAAAAASUVORK5CYII="},889:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWBAMAAAA2mnEIAAAALVBMVEX5rD75rD75rD75rD75rD75rD/5rD/5rD/5rD75rD/5rD75rD/5rD/5rD/5rD5fyIAMAAAADnRSTlMCkdkQMMNUIvFFg+WsZNscE4cAAADBSURBVBjTY2BgYGAReqfowAAGbF0ODCwrEsDsQOYcpWMGoiAm0wS5d+/ePeRUALIjrd+BwOapQNUC+ybse/fO8jVjAgMH47tmi3fPLd4JNDB42b17xP7Oed+7x0sYRPLevQsoYXr37pkjg8K5d+/eMMQBCSaGB3rvdO8y37307hEfiC1ezlBeA2ID1TwNNQ+NA6kB6l0AtJELpBdo5rt35kAMNBNoF4QNtAvohnfvPN+9A7kB2W0obkb2C4of4X4HAPLQaUz8SV+2AAAAAElFTkSuQmCC"},900:function(t,e,n){"use strict";n(881)},904:function(t,e,n){"use strict";n.r(e);var o={name:"UserItem",props:{item:{type:Object,default:function(){}},show:{type:String,default:"all"},isFollow:{type:Boolean,default:!1}},data:function(){return{}},methods:{toUser:function(){this.$router.push("/user/".concat(this.item.id))}}},r=(n(900),n(12)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-item-container",class:{simple:"simple"===t.show}},[n("div",{staticClass:"flex user-item",on:{click:function(e){return e.stopPropagation(),t.toUser(e)}}},[n("avatar",{attrs:{user:t.item,size:"simple"===t.show?40:45,round:!0}}),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"flex"},[n("span",{staticClass:"name text-hidden"},[t._v(t._s(t.item.username))]),t._v(" "),"all"===t.show&&t.item.groupName?n("span",{staticClass:"role"},[t._v(t._s(t.item.groupName))]):t._e()]),t._v(" "),n("div",{staticClass:"flex count"},["all"===t.show?n("div",{staticClass:"count-item"},[t._v(t._s(t.$t("profile.topic"))+" "+t._s(t.item.threadCount||0))]):t._e(),t._v(" "),"all"===t.show?n("div",{staticClass:"count-item"},[t._v(t._s(t.$t("profile.following"))+" "+t._s(t.item.followCount||0))]):t._e(),t._v(" "),n("div",{staticClass:"count-item"},[t._v(t._s(t.$t("profile.followers"))+" "+t._s(t.item.fansCount||0))])])])],1),t._v(" "),t.isFollow?n("el-button",{staticClass:"follow",attrs:{type:"text"}},[t._v("\n    "+t._s(t.$t("profile.following"))+"\n  ")]):t._e()],1)}),[],!1,null,"ee325c6e",null);e.default=component.exports;installComponents(component,{Avatar:n(344).default})},905:function(t,e,n){},906:function(t,e,n){},907:function(t,e,n){},908:function(t,e,n){"use strict";n.r(e);var o={name:"ProductItem",props:{item:{type:Object,default:function(){}}},data:function(){return{}}},r=(n(968),n(12)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.item?n("a",{staticClass:"product-container",attrs:{href:t.item.detailContent,target:"_blank",el:"nofollow"}},[n("el-image",{staticClass:"image",attrs:{src:t.item.imagePath,alt:t.item.title,fit:"cover"}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[n("i",{staticClass:"el-icon-loading"})])]),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"info-header"},[n("div",{staticClass:"title"},[t._v(t._s(t.item.title))]),t._v(" "),t.item.price>0?n("div",{staticClass:"price"},[t._v(t._s(t.$t("post.yuanItem")+t.item.price+t.$t("post.yuan")))]):t._e()]),t._v(" "),n("div",{staticClass:"btn"},[n("svg-icon",{staticClass:"icon",attrs:{type:"product-icon"}}),t._v(t._s(t.$t("post.buyProudct")))],1)])],1):t._e()}),[],!1,null,"85619e88",null);e.default=component.exports;installComponents(component,{SvgIcon:n(78).default})},909:function(t,e,n){"use strict";n.r(e);n(14),n(111);var o={name:"APlayer",props:{file:{type:Object,default:function(){}},currentAudio:{type:Object,default:function(){}}},data:function(){return{onDragging:!1,ap:null,delta:0}},mounted:function(){this.ap=new this.$aplayer({container:document.getElementById(this.file.pid),mutex:!1,listFolded:!1,listMaxHeight:90,lrcType:3,volume:1,loop:"none",theme:"#139b86",audio:[{name:this.file.fileName,url:this.file.mediaUrl}]})},beforeDestroy:function(){this.ap&&this.ap.destroy()},computed:{currentFile:function(){return this.currentAudio.id===this.file._jv.id},playing:function(){return this.currentAudio.currentTime&&this.currentAudio.duration}},methods:{formatDuration:function(t){var e=Math.floor(t/60),n=(t-60*e).toString().substr(0,2);return"."===n[1]&&(n="0".concat(n[0])),"".concat(e,":").concat(n)},formatCurrentTime:function(t){var e=parseInt(t/60)%60,n=(t%60).toFixed(),o=e<10?"0".concat(e):e,s=n<10?"0".concat(n):n;return"".concat(o,":").concat(s)},convertToPercentage:function(){return this.currentAudio.currentTime/this.currentAudio.duration*100},onmousedown:function(){window.document.addEventListener("mousemove",this.dragging),window.document.addEventListener("mouseup",this.onMouseUp)},dragging:function(t){this.delta=t.clientX-this.$refs.progress.getBoundingClientRect().x,this.delta<0&&(this.delta=0),this.delta>290&&(this.delta=290);var time=this.delta/290*this.currentAudio.duration;this.$emit("seeking",time)},onMouseUp:function(){var time=this.delta/290*this.currentAudio.duration;this.$emit("seek",time),window.document.removeEventListener("mousemove",this.dragging),window.document.removeEventListener("mouseup",this.onMouseUp)}}},r=(n(969),n(12)),component=Object(r.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:this.file.pid}})}),[],!1,null,"02a0a41e",null);e.default=component.exports},910:function(t,e,n){"use strict";n(883)},911:function(t,e,n){"use strict";n.r(e);n(14),n(32);var o=n(873),r={name:"RecommendUser",mixins:[n.n(o).a],props:{list:{type:Array,default:function(){return[]}}},data:function(){return{userList:[],loading:!1,pageNum:1,pageSize:4}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},watch:{list:{handler:function(t){this.userList=t},deep:!0}},mounted:function(){0===this.list.length?this.getList():this.userList=this.list},methods:{getList:function(){var t=this;this.userList=[],this.loading=!0;var e={include:"groups",limit:this.pageSize};this.$store.dispatch("jv/get",["users/recommended",{params:e}]).then((function(e){var data=e;e&&Array.isArray(e)&&data.forEach((function(t,i){data[i].groupName=t.groups[0]?t.groups[0].name:""})),t.userList=data}),(function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},refresh:function(){this.getList()}}},c=(n(910),n(12)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"recommend-user-container"},[n("div",{staticClass:"recommend-user-title"},[t._v(t._s(t.$t("home.recommentUser")))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"recommend-user-list"},[t._l(t.userList,(function(t,e){return n("user-item",{key:e,attrs:{item:t,show:"simple"}})})),t._v(" "),0===t.userList.length?n("div",{staticClass:"no-more"},[t._v(t._s(t.$t("discuzq.list.noData")))]):t._e()],2),t._v(" "),n("div",{staticClass:"refresh",on:{click:t.refresh}},[n("svg-icon",{staticClass:"icon",attrs:{type:"refresh"}}),t._v("\n    "+t._s(t.$t("home.refresh"))+"\n  ")],1)])}),[],!1,null,"00b4b6a3",null);e.default=component.exports;installComponents(component,{UserItem:n(904).default,SvgIcon:n(78).default})},957:function(t,e,n){"use strict";n.r(e);n(14),n(32);var o=n(878),time=n(875),r=n(879),c=n(873),l=n.n(c),d=n(208),m=n.n(d),h={name:"PostItem",filters:{formatDate:function(t){return Object(time.b)(t)}},mixins:[l.a,m.a],props:{item:{type:Object,default:function(){}},showLike:{type:Boolean,default:!0},showComment:{type:Boolean,default:!0},showShare:{type:Boolean,default:!0},lazy:{type:Boolean,default:!0},infoimage:{type:Boolean,default:!1},canDetail:{type:Boolean,default:!1},padding:{type:String,default:"20.5px 20px 30px"}},data:function(){return{loading:!1,showVideoPop:!1,isLiked:!1,currentAudio:{id:"",url:"",currentTime:"",duration:"",audio:"",seeking:!1,isPlay:!1,isLoading:!1}}},computed:{unpaid:function(){return!(this.item.paid||0===parseFloat(this.item.price))},forums:function(){return this.$store.state.site.info.attributes||{}}},watch:{item:{handler:function(t){this.isLiked=t.firstPost&&t.firstPost.isLiked,this.likeCount=t.firstPost&&t.firstPost.likeCount},deep:!0,immediate:!0}},mounted:function(){this.currentAudio.audio=document.getElementById("audio-player".concat(this.item&&this.item._jv&&this.item._jv.id))},methods:{handleLike:function(){var t=this;if(this.$store.getters["session/get"]("isLogin")){if(this.loading)return;if(!this.item.firstPost.canLike)return void this.$message.error(this.$t("topic.noThreadLikePermission"));this.loading=!0;var e=!this.isLiked,n={_jv:{type:"posts",id:this.item.firstPost&&this.item.firstPost._jv&&this.item.firstPost._jv.id},isLiked:e};return this.$store.dispatch("jv/patch",n).then((function(){t.$message.success(e?t.$t("discuzq.msgBox.likeSuccess"):t.$t("discuzq.msgBox.cancelLikeSuccess")),e?t.likeCount+=1:t.likeCount-=1,t.isLiked=e,t.$emit("change")}),(function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}this.$message.warning("请登录"),window.setTimeout((function(){t.headerTologin()}),1e3)},toDetail:function(){this.item.isDraft||this.canViewPostsFn()&&this.routerLink()},onClickImage:function(){this.unpaid&&this.canViewPostsFn()&&this.routerLink()},openVideo:function(){this.canViewPostsFn()&&(this.unpaid?this.routerLink():"/"===this.$route.path||"/site/search"===this.$route.path||"category-id"===this.$route.name?this.$emit("showVideoFn",this.item.threadVideo):this.showVideoPop=!0)},routerLink:function(){window.open("/thread/".concat(this.item._jv&&this.item._jv.id),"_blank")},onClickContent:function(t){if(!this.item.isDraft){var e=t||window.event;"a"!==(e.target||e.srcElement).nodeName.toLocaleLowerCase()&&this.toDetail()}},canViewPostsFn:function(){var t=this;return this.item.canViewPosts?!this.canDetail||(this.$message.warning(this.$t("topic.joinAfterView")),!1):(this.$store.getters["session/get"]("isLogin")?this.$message.warning(this.$t("home.noPostingTopic")):(this.$message.warning(this.$t("core.not_authenticated")),window.setTimeout((function(){t.headerTologin()}),1e3)),!1)},formatTopicHTML:function(html){return o.a.parse(html)},extensionValidate:function(t){return r.extensionList.indexOf(t.toUpperCase())>0?t.toUpperCase():"UNKNOWN"},play:function(t){var e=this;this.unpaid?this.routerLink():this.canViewPostsFn()&&this.currentAudio.audio&&(this.currentAudio.id!==t._jv.id&&(this.resetAudio(this.currentAudio.audio),this.currentAudio.url=t.url||t.media_url,this.currentAudio.id=t._jv.id,this.currentAudio.audio.src=this.currentAudio.url,this.currentAudio.isLoading=!0,this.currentAudio.audio.load()),window.setTimeout((function(){e.currentAudio.audio.play(),e.currentAudio.isPlay=!0,e.currentAudio.audio.addEventListener("timeupdate",e.onProgressing),e.currentAudio.audio.addEventListener("ended",e.onEnded),e.$emit("audioPlay",e.currentAudio.id)}),0))},onProgressing:function(){this.currentAudio.seeking||(this.currentAudio.isLoading=!1,this.currentAudio.duration=this.currentAudio.audio.duration,this.currentAudio.currentTime=this.currentAudio.audio.currentTime)},onEnded:function(){this.resetAudio(this.currentAudio.audio)},resetAudio:function(audio){audio&&(audio.removeEventListener("timeupdate",this.onProgressing),audio.removeEventListener("ended",this.onEnded),this.currentAudio.isPlay=!1,this.currentAudio.duration="",this.currentAudio.currentTime="")},pause:function(){this.currentAudio.audio&&(this.currentAudio.isLoading=!1,this.currentAudio.isPlay=!1,this.currentAudio.audio.pause())},seek:function(time){this.currentAudio.audio&&(this.currentAudio.seeking=!1,this.currentAudio.currentTime=time,this.currentAudio.audio.currentTime=time)},seeking:function(time){this.currentAudio.seeking=!0,this.currentAudio.currentTime=time}}},v=(n(1050),n(12)),component=Object(v.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-container",style:{padding:t.padding}},[t.item.isEssence?n("div",{staticClass:"essence"},[n("svg-icon",{attrs:{type:"index-essence"}})],1):t._e(),t._v(" "),5===t.item.type&&t.item.question&&1===t.item.question.is_answer&&t.item.question.beUser?n("avatar",{staticClass:"avatar",attrs:{user:{id:t.item.question.beUser.id,username:t.item.question.beUser.username,avatarUrl:t.item.question.beUser.avatarUrl,isReal:t.item.question.beUser.isReal},"prevent-jump":t.canDetail}}):t.item.user?n("avatar",{staticClass:"avatar",attrs:{user:{id:t.item.user.id,username:t.item.user.username,avatarUrl:t.item.user.avatarUrl,isReal:t.item.user.isReal},"prevent-jump":t.canDetail}}):t._e(),t._v(" "),n("div",{staticClass:"main-cont"},[n("div",{staticClass:"top-flex"},[n("div",{staticClass:"top-user-info"},[5===t.item.type&&t.item.question&&1===t.item.question.is_answer&&t.item.question.beUser?n("nuxt-link",{staticClass:"user-info",attrs:{to:t.item.user.id>0?"/user/"+t.item.question.beUser.id:""}},[n("span",{staticClass:"user-name"},[t._v(t._s(t.item.question.beUser.username))]),t._v(" "),t.item.question.beUser&&t.item.question.beUser.groups&&t.item.question.beUser.groups.length>0&&t.item.question.beUser.groups[0].isDisplay?n("span",{staticClass:"admin"},[t._v("\n            ("+t._s(t.item.question.beUser.groups[0].name)+")\n          ")]):t._e()]):t.item.user?n("nuxt-link",{staticClass:"user-info",attrs:{to:t.item.user.id>0?"/user/"+t.item.user.id:""}},[n("span",{staticClass:"user-name"},[t._v(t._s(t.item.user.username))]),t._v(" "),t.item.user&&t.item.user.groups&&t.item.user.groups.length>0&&t.item.user.groups[0].isDisplay?n("span",{staticClass:"admin"},[t._v("\n            "+t._s(t.item.user.groups[0].isDisplay?"("+t.item.user.groups[0].name+")":"")+"\n          ")]):t._e()]):t._e(),t._v(" "),5===t.item.type&&t.item.question&&1===t.item.question.is_answer?n("div",{staticClass:"answered"},[t._v("\n          "+t._s(t.$t("topic.answered"))+"\n        ")]):t._e()],1),t._v(" "),n("div",{staticClass:"time"},[t.item.createdAt?[t._v(t._s(t.$t("topic.publishAt"))+"\n          "+t._s(t._f("formatDate")(t.item.createdAt)))]:t._e()],2)]),t._v(" "),5===t.item.type?n("div",{staticClass:"question-user"},[t.item.question?t._e():n("div",[t._v("\n        "+t._s(t.$t("topic.questionsAndAnswers"))+"\n        "),n("div",{staticClass:"inline blue"},[t._v("\n          ￥"+t._s(t.item&&t.item.questionTypeAndMoney?t.item.questionTypeAndMoney.money:0)+"\n        ")])]),t._v(" "),t.item.question&&0===t.item.question.is_answer?n("div",{staticClass:"inline"},[n("div",{staticClass:"inline blue"},[t._v("\n          ￥"+t._s(t.item&&t.item.questionTypeAndMoney?t.item.questionTypeAndMoney.money:0)+"\n        ")]),t._v("\n        "+t._s(t.$t("topic.be"))+"\n        "),t.item.question&&t.item.question.beUser?n("nuxt-link",{staticClass:"grey",attrs:{to:t.item.question.beUser.id>0?"/user/"+t.item.question.beUser.id:""}},[t._v("@"+t._s(t.item.question.beUser.username))]):t._e(),t._v("\n        "+t._s(t.$t("topic.question"))+"\n      ")],1):t._e(),t._v(" "),t.item.question&&1===t.item.question.is_answer?[t._v("\n        "+t._s(t.$t("topic.answer"))+"\n        "),t.item.user?n("nuxt-link",{staticClass:"grey",attrs:{to:t.item.user.id>0?"/user/"+t.item.user.id:""}},[t._v("@"+t._s(t.item.user.username))]):t._e(),t._v("\n        "+t._s(t.$t("topic.of"))+t._s(t.$t("topic.question"))+"\n      ")]:t._e()],2):t._e(),t._v(" "),t.item.firstPost?[n("div",{staticClass:"first-post",on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail(e)}}},[n("a",{attrs:{href:"/thread/"+(t.item._jv&&t.item._jv.id)},on:{click:function(e){return e.preventDefault(),t.onClickContent(e)}}},[1===t.item.type?n("div",{staticClass:"title"},[t._v("\n            "+t._s(t.$t("home.released"))+"\n            "),n("svg-icon",{directives:[{name:"show",rawName:"v-show",value:parseFloat(t.item.price)>0||parseFloat(t.item.attachmentPrice)>0,expression:"\n                parseFloat(item.price) > 0 ||\n                  parseFloat(item.attachmentPrice) > 0\n              "}],staticClass:"blue icon-pay-yuan-inline",attrs:{type:"pay-yuan"}}),t._v(" "),n("span",{staticClass:"blue"},[t._v(t._s(t.item.title))])],1):n("div",{staticClass:"content"},[5===t.item.type?n("svg-icon",{staticClass:"icon-pay-yuan blue",attrs:{type:"question-icon"}}):6===t.item.type?n("svg-icon",{staticClass:"icon-pay-yuan blue",attrs:{type:"product-icon"}}):parseFloat(t.item.price)>0||parseFloat(t.item.attachmentPrice)>0?n("svg-icon",{staticClass:"icon-pay-yuan grey",attrs:{type:"pay-yuan"}}):t._e(),t._v(" "),n("div",{class:{"content-block":5===t.item.type||6===t.item.type||parseFloat(t.item.price)>0,blue:5===t.item.type},domProps:{innerHTML:t._s(t.$xss(t.formatTopicHTML(t.item.firstPost.summary)))}})],1)]),t._v(" "),t.item.firstPost.images&&t.item.firstPost.images.length>0?n("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{url:"data-source"},expression:"{ url: 'data-source' }"}],staticClass:"images",on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail(e)}}},t._l(t.item.firstPost.images.slice(0,3),(function(image,e){return n("el-image",{key:e,class:{image:!0,infoimage:t.infoimage},attrs:{src:image.thumbUrl,"data-source":t.unpaid?"":image.url,alt:image.filename,fit:"cover",lazy:t.lazy},on:{click:function(e){return e.target!==e.currentTarget?null:t.onClickImage(e)}}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[n("i",{staticClass:"el-icon-loading"})])])})),1):t._e(),t._v(" "),t.item.firstPost.images&&t.item.firstPost.images.length>3?n("div",{staticClass:"image-count",on:{click:t.toDetail}},[t._v("\n          "+t._s(t.$t("home.total"))+" "+t._s(t.item.firstPost.images.length)+"\n          "+t._s(t.$t("home.seeAllImage"))+"\n        ")]):t._e(),t._v(" "),2===t.item.type&&t.item.threadVideo?n("div",{staticClass:"video-main",on:{click:function(e){return e.stopPropagation(),t.openVideo(e)}}},[t.item.threadVideo.cover_url?n("el-image",{staticClass:"video-img-cover",attrs:{src:t.item.threadVideo.cover_url,alt:t.item.threadVideo.file_name,fit:"cover",lazy:t.lazy}}):n("div",{staticClass:"no-cover"},[t._v(t._s(t.$t("home.noPoster")))]),t._v(" "),n("svg-icon",{staticClass:"video-play",attrs:{type:"video-play"}})],1):t._e(),t._v(" "),t.item.firstPost.attachments&&t.item.firstPost.attachments.length>0?n("div",{staticClass:"attachment",on:{click:t.toDetail}},[n("svg-icon",{attrs:{type:t.extensionValidate(t.item.firstPost.attachments[0].extension)}}),t._v(" "),n("div",{staticClass:"name text-hidden"},[t._v("\n            "+t._s(t.item.firstPost.attachments[0].fileName)+"\n          ")]),t._v(" "),t.item.firstPost.attachments.length>1?n("div",{staticClass:"total"},[t._v("\n            "+t._s(t.$t("home.etc")+t.item.firstPost.attachments.length+t.$t("home.attachmentTotal"))+"\n          ")]):t._e()],1):t._e()]),t._v(" "),6===t.item.type?n("product-item",{attrs:{item:t.item&&t.item.firstPost&&t.item.firstPost.postGoods}}):t._e(),t._v(" "),4===t.item.type?n("div",{on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail(e)}}},[n("APlayer",{attrs:{file:t.item&&t.item.threadAudio,"current-audio":t.currentAudio},on:{play:t.play,pause:t.pause,seek:t.seek,seeking:t.seeking}}),t._v(" "),n("audio",{staticClass:"audio-player",staticStyle:{display:"none"},attrs:{id:"audio-player"+(t.item._jv&&t.item._jv.id),src:t.currentAudio.url}})],1):t._e(),t._v(" "),t.item.location?n("nuxt-link",{staticClass:"location",attrs:{to:"/topic/position?longitude="+t.item.longitude+"&latitude="+t.item.latitude}},[n("span",{staticClass:"flex"},[n("svg-icon",{staticClass:"icon",attrs:{type:"location"}}),t._v("\n          "+t._s(t.item.location)+"\n        ")],1)]):t._e(),t._v(" "),t.canDetail?t._e():n("div",{staticClass:"bottom-handle"},[n("div",{staticClass:"left"},[t.showLike?n("div",{staticClass:"btn like",class:{liked:t.isLiked},on:{click:t.handleLike}},[n("svg-icon",{staticClass:"icon",attrs:{type:"like"},on:{click:t.handleLike}}),t._v("\n            "+t._s(t.isLiked?t.$t("topic.liked"):t.$t("topic.like"))+"\n            "+t._s(t.likeCount>0?t.likeCount:"")+"\n          ")],1):t._e(),t._v(" "),t.showComment?n("div",{staticClass:"btn comment",on:{click:t.toDetail}},[n("svg-icon",{staticClass:"icon",attrs:{type:"post-comment"}}),t._v("\n            "+t._s(t.$t("topic.comment"))+"\n            "+t._s(t.item.postCount-1>0?t.item.postCount-1:"")+"\n          ")],1):t._e(),t._v(" "),t.item._jv&&t.item._jv.id&&t.showShare?n("share-popover",{attrs:{"threads-id":t.item._jv.id}},[n("div",{staticClass:"btn share"},[n("svg-icon",{staticClass:"icon",attrs:{type:"link"}}),t._v("\n              "+t._s(t.$t("topic.share"))+"\n            ")],1)]):t._e(),t._v(" "),t._t("btn-edit"),t._v(" "),t._t("btn-delete")],2),t._v(" "),t._t("bottom-right")],2)]:t._e()],2),t._v(" "),t.showVideoPop?n("dplayer-pop",{attrs:{"cover-url":t.item.threadVideo.cover_url,url:t.item.threadVideo.media_url},on:{remove:function(e){t.showVideoPop=!1}}}):t._e()],1)}),[],!1,null,"51df2ed8",null);e.default=component.exports;installComponents(component,{SvgIcon:n(78).default,Avatar:n(344).default,ProductItem:n(908).default,APlayer:n(909).default,SharePopover:n(887).default,DplayerPop:n(876).default})},958:function(t,e,n){"use strict";n.r(e);n(14),n(32);var o=n(878),time=n(875),r=n(879),c=n(873),l=n.n(c),d=n(208),m=n.n(d),h={name:"PostItem",filters:{formatDate:function(t){return Object(time.b)(t)}},mixins:[l.a,m.a],props:{item:{type:Object,default:function(){}},showLike:{type:Boolean,default:!0},showComment:{type:Boolean,default:!0},showShare:{type:Boolean,default:!0},lazy:{type:Boolean,default:!0},infoimage:{type:Boolean,default:!1},canDetail:{type:Boolean,default:!1},padding:{type:String,default:"20.5px 20px 30px"}},data:function(){return{loading:!1,showVideoPop:!1,isLiked:!1,currentAudio:{id:"",url:"",currentTime:"",duration:"",audio:"",seeking:!1,isPlay:!1,isLoading:!1}}},computed:{unpaid:function(){return!(this.item.paid||0===parseFloat(this.item.price))},forums:function(){return this.$store.state.site.info.attributes||{}}},watch:{item:{handler:function(t){this.isLiked=t.firstPost&&t.firstPost.isLiked,this.likeCount=t.firstPost&&t.firstPost.likeCount},deep:!0,immediate:!0}},mounted:function(){this.currentAudio.audio=document.getElementById("audio-player".concat(this.item&&this.item._jv&&this.item._jv.id))},methods:{handleLike:function(){var t=this;if(this.$store.getters["session/get"]("isLogin")){if(this.loading)return;if(!this.item.firstPost.canLike)return void this.$message.error(this.$t("topic.noThreadLikePermission"));this.loading=!0;var e=!this.isLiked,n={_jv:{type:"posts",id:this.item.firstPost&&this.item.firstPost._jv&&this.item.firstPost._jv.id},isLiked:e};return this.$store.dispatch("jv/patch",n).then((function(){t.$message.success(e?t.$t("discuzq.msgBox.likeSuccess")+t.$t("discuzq.msgBox.likeSuccess"):t.$t("discuzq.msgBox.cancelLikeSuccess")),e?t.likeCount+=1:t.likeCount-=1,t.isLiked=e,t.$emit("change")}),(function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}this.$message.warning("请登录"),window.setTimeout((function(){t.headerTologin()}),1e3)},toDetail:function(){this.item.isDraft||this.canViewPostsFn()&&this.routerLink()},onClickImage:function(){this.unpaid&&this.canViewPostsFn()&&this.routerLink()},openVideo:function(){this.canViewPostsFn()&&(this.unpaid?this.routerLink():"/"===this.$route.path||"/site/search"===this.$route.path||"category-id"===this.$route.name?this.$emit("showVideoFn",this.item.threadVideo):this.showVideoPop=!0)},routerLink:function(){window.open("/thread/".concat(this.item._jv&&this.item._jv.id),"_blank")},onClickContent:function(t){if(!this.item.isDraft){var e=t||window.event;"a"!==(e.target||e.srcElement).nodeName.toLocaleLowerCase()&&this.toDetail()}},canViewPostsFn:function(){var t=this;return this.item.canViewPosts?!this.canDetail||(this.$message.warning(this.$t("topic.joinAfterView")),!1):(this.$store.getters["session/get"]("isLogin")?this.$message.warning(this.$t("home.noPostingTopic")):(this.$message.warning(this.$t("core.not_authenticated")),window.setTimeout((function(){t.headerTologin()}),1e3)),!1)},formatTopicHTML:function(html){return o.a.parse(html)},extensionValidate:function(t){return r.extensionList.indexOf(t.toUpperCase())>0?t.toUpperCase():"UNKNOWN"},play:function(t){var e=this;this.unpaid?this.routerLink():this.canViewPostsFn()&&this.currentAudio.audio&&(this.currentAudio.id!==t._jv.id&&(this.resetAudio(this.currentAudio.audio),this.currentAudio.url=t.url||t.media_url,this.currentAudio.id=t._jv.id,this.currentAudio.audio.src=this.currentAudio.url,this.currentAudio.isLoading=!0,this.currentAudio.audio.load()),window.setTimeout((function(){e.currentAudio.audio.play(),e.currentAudio.isPlay=!0,e.currentAudio.audio.addEventListener("timeupdate",e.onProgressing),e.currentAudio.audio.addEventListener("ended",e.onEnded),e.$emit("audioPlay",e.currentAudio.id)}),0))},onProgressing:function(){this.currentAudio.seeking||(this.currentAudio.isLoading=!1,this.currentAudio.duration=this.currentAudio.audio.duration,this.currentAudio.currentTime=this.currentAudio.audio.currentTime)},onEnded:function(){this.resetAudio(this.currentAudio.audio)},resetAudio:function(audio){audio&&(audio.removeEventListener("timeupdate",this.onProgressing),audio.removeEventListener("ended",this.onEnded),this.currentAudio.isPlay=!1,this.currentAudio.duration="",this.currentAudio.currentTime="")},pause:function(){this.currentAudio.audio&&(this.currentAudio.isLoading=!1,this.currentAudio.isPlay=!1,this.currentAudio.audio.pause())},seek:function(time){this.currentAudio.audio&&(this.currentAudio.seeking=!1,this.currentAudio.currentTime=time,this.currentAudio.audio.currentTime=time)},seeking:function(time){this.currentAudio.seeking=!0,this.currentAudio.currentTime=time}}},v=(n(970),n(12)),component=Object(v.a)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"add-padding-line"},[o("div",{staticClass:"post-container"},[t.item.isEssence?o("div",{staticClass:"essence"},[o("img",{attrs:{src:n(885),alt:""}})]):t._e(),t._v(" "),o("div",{staticClass:"post-header"},[5===t.item.type&&t.item.question&&1===t.item.question.is_answer&&t.item.question.beUser?o("avatar",{staticClass:"avatar",attrs:{user:{id:t.item.question.beUser.id,username:t.item.question.beUser.username,avatarUrl:t.item.question.beUser.avatarUrl,isReal:t.item.question.beUser.isReal},size:"40",round:!0,"prevent-jump":t.canDetail}}):t.item.user?o("avatar",{staticClass:"avatar",attrs:{user:{id:t.item.user.id,username:t.item.user.username,avatarUrl:t.item.user.avatarUrl,isReal:t.item.user.isReal},size:"40",round:!0,"prevent-jump":t.canDetail}}):t._e(),t._v(" "),5===t.item.type&&t.item.question&&1===t.item.question.is_answer&&t.item.question.beUser?o("nuxt-link",{staticClass:"user-info",attrs:{to:t.item.user.id>0?"/user/"+t.item.question.beUser.id:""}},[o("span",{staticClass:"user-name"},[t._v(t._s(t.item.question.beUser.username))]),t._v(" "),t.item.question.beUser&&t.item.question.beUser.groups&&t.item.question.beUser.groups.length>0&&t.item.question.beUser.groups[0].isDisplay?o("span",{staticClass:"admin"},[t._v("\n          ("+t._s(t.item.question.beUser.groups[0].name)+")\n        ")]):t._e()]):t.item.user?o("nuxt-link",{staticClass:"user-info",attrs:{to:t.item.user.id>0?"/user/"+t.item.user.id:""}},[o("span",{staticClass:"user-name"},[t._v(t._s(t.item.user.username))]),t._v(" "),t.item.user&&t.item.user.groups&&t.item.user.groups.length>0&&t.item.user.groups[0].isDisplay?o("span",{staticClass:"admin"},[t._v("\n          "+t._s(t.item.user.groups[0].isDisplay?"("+t.item.user.groups[0].name+")":"")+"\n        ")]):t._e()]):t._e(),t._v(" "),5===t.item.type&&t.item.question&&1===t.item.question.is_answer?o("div",{staticClass:"answered"},[t._v(t._s(t.$t("topic.answered")))]):t._e()],1),t._v(" "),t.item.firstPost?o("div",{staticClass:"post-content"},[o("div",{staticClass:"first-post",on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail(e)}}},[o("div",{staticClass:"first-post-desc",on:{click:t.onClickContent}},[o("div",{staticClass:"first-post-desc__tips"},[0!==t.item.type&&1!==t.item.type||!t.item.isRedPacket?t._e():o("img",{staticClass:"first-post-img",attrs:{src:n(901)}}),t._v(" "),5===t.item.type&&t.item.questionTypeAndMoney&&0===t.item.questionTypeAndMoney.type?o("img",{staticClass:"first-post-img",attrs:{src:n(902)}}):5===t.item.type?o("img",{staticClass:"first-post-img",attrs:{src:n(903)}}):t._e(),t._v(" "),6===t.item.type?o("img",{staticClass:"first-post-img",attrs:{src:n(951)}}):t._e(),t._v(" "),7===t.item.type?o("img",{staticClass:"first-post-img",attrs:{src:n(952)}}):t._e(),t._v(" "),1===t.item.type?o("span",{staticClass:"first-post-tip"}):t._e(),t._v(" "),5===t.item.type&&t.item.questionTypeAndMoney&&0===t.item.questionTypeAndMoney.type?o("span",{staticClass:"first-post-tip"},[t._v("【￥"+t._s(t.item.questionTypeAndMoney.money)+"】")]):t._e(),t._v(" "),parseFloat(t.item.price)>0||parseFloat(t.item.attachmentPrice)>0?o("img",{staticClass:"first-post-coin",attrs:{src:n(889)}}):t._e()]),t._v(" "),1===t.item.type?o("p",{staticClass:"content"},[t._v(t._s(t.item.title))]):o("p",{staticClass:"content",domProps:{innerHTML:t._s(t.$xss(t.formatTopicHTML(t.item.firstPost.summary)))}}),t._v(" "),o("p",{staticClass:"content"},[t._v(t._s(t.item.description))]),t._v(" "),5===t.item.type?o("span",[t.item.question&&0===t.item.question.is_answer?[t.item.question&&t.item.question.beUser?o("nuxt-link",{staticClass:"questioner",attrs:{to:t.item.question.beUser.id>0?"/user/"+t.item.question.beUser.id:""}},[t._v("@"+t._s(t.item.question.beUser.username))]):t._e()]:t._e(),t._v(" "),t.item.question&&1===t.item.question.is_answer?[t.item.user?o("nuxt-link",{staticClass:"questioner",attrs:{to:t.item.user.id>0?"/user/"+t.item.user.id:""}},[t._v("@"+t._s(t.item.user.username))]):t._e()]:t._e()],2):t._e()]),t._v(" "),t.item.firstPost.images&&t.item.firstPost.images.length>0?o("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{url:"data-source"},expression:"{ url: 'data-source' }"}],staticClass:"images",on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail(e)}}},t._l(t.item.firstPost.images.slice(0,3),(function(image,e){return o("el-image",{key:e,class:{image:!0,infoimage:t.infoimage},attrs:{src:image.thumbUrl,"data-source":t.unpaid?"":image.url,alt:image.filename,fit:"cover",lazy:t.lazy},on:{click:function(e){return e.target!==e.currentTarget?null:t.onClickImage(e)}}},[o("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[o("i",{staticClass:"el-icon-loading"})])])})),1):t._e(),t._v(" "),t.item.firstPost.images&&t.item.firstPost.images.length>3?o("div",{staticClass:"image-count",on:{click:t.toDetail}},[t._v("\n          "+t._s(t.$t("home.total"))+" "+t._s(t.item.firstPost.images.length)+"\n          "+t._s(t.$t("home.seeAllImage"))+"\n        ")]):t._e(),t._v(" "),2===t.item.type&&t.item.threadVideo?o("div",{staticClass:"video-main",on:{click:function(e){return e.stopPropagation(),t.openVideo(e)}}},[t.item.threadVideo.cover_url?o("el-image",{staticClass:"video-img-cover",attrs:{src:t.item.threadVideo.cover_url,alt:t.item.threadVideo.file_name,fit:"cover",lazy:t.lazy}}):o("div",{staticClass:"no-cover"},[t._v(t._s(t.$t("home.noPoster")))]),t._v(" "),o("svg-icon",{staticClass:"video-play",attrs:{type:"video-play"}})],1):t._e(),t._v(" "),t.item.firstPost.attachments&&t.item.firstPost.attachments.length>0?o("div",{staticClass:"attachment",on:{click:t.toDetail}},[o("svg-icon",{attrs:{type:t.extensionValidate(t.item.firstPost.attachments[0].extension)}}),t._v(" "),o("div",{staticClass:"name text-hidden"},[t._v("\n            "+t._s(t.item.firstPost.attachments[0].fileName)+"\n          ")]),t._v(" "),t.item.firstPost.attachments.length>1?o("div",{staticClass:"total"},[t._v("\n            "+t._s(t.$t("home.etc")+t.item.firstPost.attachments.length+t.$t("home.attachmentTotal"))+"\n          ")]):t._e()],1):t._e()]),t._v(" "),6===t.item.type?o("product-item",{attrs:{item:t.item&&t.item.firstPost&&t.item.firstPost.postGoods}}):t._e(),t._v(" "),4===t.item.type?o("div",{on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail(e)}}},[o("APlayer",{attrs:{file:t.item&&t.item.threadAudio,"current-audio":t.currentAudio},on:{play:t.play,pause:t.pause,seek:t.seek,seeking:t.seeking}}),t._v(" "),o("audio",{staticClass:"audio-player",staticStyle:{display:"none"},attrs:{id:"audio-player"+(t.item._jv&&t.item._jv.id),src:t.currentAudio.url}})],1):t._e(),t._v(" "),t.item.location?o("nuxt-link",{staticClass:"location",attrs:{to:"/topic/position?longitude="+t.item.longitude+"&latitude="+t.item.latitude}},[o("span",{staticClass:"flex"},[o("svg-icon",{staticClass:"icon",attrs:{type:"location"}}),t._v("\n          "+t._s(t.item.location)+"\n        ")],1)]):t._e()],1):t._e(),t._v(" "),o("div",{staticClass:"post-footer"},[o("div",{staticClass:"time"},[t.item.createdAt?[t._v("\n          "+t._s(t.item.isDraft?t.$t("topic.saveAt"):t.$t("topic.publishAt"))+"\n          "+t._s(t._f("formatDate")(t.item.createdAt))+"\n        ")]:t._e()],2),t._v(" "),t.canDetail?t._e():o("div",{staticClass:"handle-btn"},[t.showLike?o("div",{staticClass:"btn like",class:{liked:t.isLiked},on:{click:t.handleLike}},[o("svg-icon",{staticClass:"icon",attrs:{type:"like"},on:{click:t.handleLike}}),t._v("\n          "+t._s(t.isLiked?t.$t("topic.liked"):t.$t("topic.like"))+"\n          "+t._s(t.likeCount>0?t.likeCount:"")+"\n        ")],1):t._e(),t._v(" "),t.showComment?o("div",{staticClass:"btn comment",on:{click:t.toDetail}},[o("svg-icon",{staticClass:"icon",attrs:{type:"post-comment"}}),t._v("\n          "+t._s(t.$t("topic.comment"))+"\n          "+t._s(t.item.postCount-1>0?t.item.postCount-1:"")+"\n        ")],1):t._e(),t._v(" "),t.item._jv&&t.item._jv.id&&t.showShare?o("share-popover",{attrs:{"threads-id":t.item._jv.id}},[o("div",{staticClass:"btn share"},[o("svg-icon",{staticClass:"icon",attrs:{type:"link"}}),t._v("\n            "+t._s(t.$t("topic.share"))+"\n          ")],1)]):t._e(),t._v(" "),t._t("bottom-right"),t._v(" "),t._t("btn-edit"),t._v(" "),t._t("btn-delete")],2)]),t._v(" "),t.showVideoPop?o("dplayer-pop",{attrs:{"cover-url":t.item.threadVideo.cover_url,url:t.item.threadVideo.media_url},on:{remove:function(e){t.showVideoPop=!1}}}):t._e()],1)])}),[],!1,null,"03c0a8c7",null);e.default=component.exports;installComponents(component,{Avatar:n(344).default,SvgIcon:n(78).default,ProductItem:n(908).default,APlayer:n(909).default,SharePopover:n(887).default,DplayerPop:n(876).default})},962:function(t,e,n){},968:function(t,e,n){"use strict";n(905)},969:function(t,e,n){"use strict";n(906)},970:function(t,e,n){"use strict";n(907)}}]);