(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1029:function(t,e,n){"use strict";n.r(e);n(18);var r={name:"IndexFilter",props:{showSort:{type:Boolean,default:!1}},data:function(){return{filterQuery:[{label:"推荐",value:"isSort",isShow:!1},{label:this.$t("home.all"),value:"",isShow:!0},{label:this.$t("home.essence"),value:"isEssence",isShow:!0},{label:this.$t("home.followed"),value:"followed",isShow:!1}],filterType:[{label:this.$t("home.noLimit"),value:""},{label:this.$t("home.text"),value:0},{label:this.$t("home.invitation"),value:1},{label:this.$t("home.video"),value:2},{label:this.$t("home.picture"),value:3},{label:this.$t("home.voice"),value:4},{label:this.$t("home.question"),value:5},{label:this.$t("home.product"),value:6}],filterSort:[{label:this.$t("home.noLimit"),value:""},{label:this.$t("home.sortCreatedAt"),value:"-createdAt"},{label:this.$t("home.sortUpdatedAt"),value:"-updatedAt"}],query:{filter:"",filterType:"",filterSort:""}}},computed:{userId:function(){return this.$store.getters["session/get"]("userId")}},watch:{userId:function(t){this.filterQuery[3].isShow=t>0},showSort:function(t){t?(this.filterQuery[0].isShow=!0,this.query.filter="isSort"):(this.filterQuery[0].isShow=!1,this.query.filter="")}},mounted:function(){this.userId>0?this.filterQuery[3].isShow=!0:this.filterQuery[3].isShow=!1,this.showSort?(this.filterQuery[0].isShow=!0,this.query.filter="isSort"):(this.filterQuery[0].isShow=!1,this.query.filter="")},methods:{onClickFilter:function(t){"followed"!==t||this.userId&&0!=+this.userId?(this.query.filter=t,this.$emit("onChangeFilter",t)):this.$message.error(this.$t("core.not_authenticated"))},handleCommandType:function(t){this.query.filterType=t,this.$emit("onChangeType",t)},handleCommandSort:function(t){this.query.filterSort=t,this.$emit("onChangeSort",t)}}},o=(n(974),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-top-conttainer"},[n("div",{staticClass:"index-filter"},[t._l(t.filterQuery,(function(e,r){return[e.isShow?n("div",{key:r,staticClass:"filter-btn",class:{active:t.query.filter===e.value},on:{click:function(n){return t.onClickFilter(e.value)}}},[t._v("\n        "+t._s(e.label)+"\n      ")]):t._e()]})),t._v(" "),n("el-dropdown",{staticClass:"filter-dropdown",attrs:{placement:"bottom"},on:{command:t.handleCommandType}},[n("span",{staticClass:"el-dropdown-link",class:{active:""!==t.query.filterType}},[t._v("\n        "+t._s(t.$t("home.filterType"))),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.filterType,(function(e,r){return n("el-dropdown-item",{key:r,class:{active:e.value===t.query.filterType},attrs:{command:e.value}},[t._v("\n          "+t._s(e.label)+"\n        ")])})),1)],1),t._v(" "),n("el-dropdown",{staticClass:"filter-dropdown",attrs:{placement:"bottom"},on:{command:t.handleCommandSort}},[n("span",{staticClass:"el-dropdown-link",class:{active:""!==t.query.filterSort}},[t._v("\n        "+t._s(t.$t("core.sort"))),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.filterSort,(function(e,r){return n("el-dropdown-item",{key:r,class:{active:e.value===t.query.filterSort},attrs:{command:e.value}},[t._v("\n          "+t._s(e.label)+"\n        ")])})),1)],1)],2),t._v(" "),n("create-post-popover")],1)}),[],!1,null,"19faa7e0",null);e.default=component.exports;installComponents(component,{CreatePostPopover:n(956).default})},1030:function(t,e,n){"use strict";n.r(e);n(14),n(32);var r=n(878),time=n(875),o=n(879),c=n(873),d=n.n(c),l=n(208),h=n.n(l),m={name:"PostItems",filters:{formatDate:function(t){return Object(time.b)(t)}},mixins:[d.a,h.a],props:{item:{type:Object,default:function(){}},showLike:{type:Boolean,default:!0},showComment:{type:Boolean,default:!0},showShare:{type:Boolean,default:!0},lazy:{type:Boolean,default:!0},infoimage:{type:Boolean,default:!1},canDetail:{type:Boolean,default:!1},padding:{type:String,default:"20.5px 20px 30px"}},data:function(){return{loading:!1,showVideoPop:!1,isLiked:!1,currentAudio:{id:"",url:"",currentTime:"",duration:"",audio:"",seeking:!1,isPlay:!1,isLoading:!1}}},computed:{unpaid:function(){return!(this.item.thread.paid||0===parseFloat(this.item.thread.price))},forums:function(){return this.$store.state.site.info.attributes||{}}},watch:{item:{handler:function(t){this.isLiked=t.thread&&t.thread.isLiked,this.likeCount=t.thread&&t.thread.likedCount},deep:!0,immediate:!0}},mounted:function(){this.currentAudio.audio=document.getElementById("audio-players".concat(this.item&&this.item.thread&&this.item.thread.pid))},methods:{handleLike:function(){var t=this;if(this.$store.getters["session/get"]("isLogin")){if(this.loading)return;if(!this.item.thread.canLike)return void this.$message.error(this.$t("topic.noThreadLikePermission"));this.loading=!0;var e=!this.isLiked,n={_jv:{type:"posts",id:this.item.thread&&this.item.thread.firstPostId},isLiked:e};return this.$store.dispatch("jv/patch",n).then((function(){t.$message.success(e?t.$t("discuzq.msgBox.likeSuccess"):t.$t("discuzq.msgBox.cancelLikeSuccess")),e?t.likeCount+=1:t.likeCount-=1,t.isLiked=e,t.$emit("change")}),(function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}this.$message.warning("请登录"),window.setTimeout((function(){t.headerTologin()}),1e3)},toDetail:function(){this.item.thread.isDraft||this.canViewPostsFn()&&this.routerLink()},onClickImage:function(){this.unpaid&&this.canViewPostsFn()&&this.routerLink()},openVideo:function(){this.canViewPostsFn()&&(this.unpaid?this.routerLink():"/"===this.$route.path||"/site/search"===this.$route.path||"category-id"===this.$route.name?this.$emit("showVideoFn",this.item.thread.extension.video):this.showVideoPop=!0)},routerLink:function(){window.open("/thread/".concat(this.item.thread&&this.item.thread.pid),"_blank")},onClickContent:function(t){if(!this.item.thread.isDraft){var e=t||window.event;"a"!==(e.target||e.srcElement).nodeName.toLocaleLowerCase()&&this.toDetail()}},canViewPostsFn:function(){var t=this;return this.item.thread.canViewPost?!this.canDetail||(this.$message.warning(this.$t("topic.joinAfterView")),!1):(this.$store.getters["session/get"]("isLogin")?this.$message.warning(this.$t("home.noPostingTopic")):(this.$message.warning(this.$t("core.not_authenticated")),window.setTimeout((function(){t.headerTologin()}),1e3)),!1)},formatTopicHTML:function(html){return r.a.parse(html)},extensionValidate:function(t){return o.extensionList.indexOf(t.toUpperCase())>0?t.toUpperCase():"UNKNOWN"},play:function(t){var e=this;this.unpaid?this.routerLink():this.canViewPostsFn()&&this.currentAudio.audio&&(this.currentAudio.id!==t.pid&&(this.resetAudio(this.currentAudio.audio),this.currentAudio.url=t.coverUrl||t.mediaUrl,this.currentAudio.id=t.pid,this.currentAudio.audio.src=this.currentAudio.url,this.currentAudio.isLoading=!0,this.currentAudio.audio.load()),window.setTimeout((function(){e.currentAudio.audio.play(),e.currentAudio.isPlay=!0,e.currentAudio.audio.addEventListener("timeupdate",e.onProgressing),e.currentAudio.audio.addEventListener("ended",e.onEnded),e.$emit("audioPlay",e.currentAudio.id)}),0))},onProgressing:function(){this.currentAudio.seeking||(this.currentAudio.isLoading=!1,this.currentAudio.duration=this.currentAudio.audio.duration,this.currentAudio.currentTime=this.currentAudio.audio.currentTime)},onEnded:function(){this.resetAudio(this.currentAudio.audio)},resetAudio:function(audio){audio&&(audio.removeEventListener("timeupdate",this.onProgressing),audio.removeEventListener("ended",this.onEnded),this.currentAudio.isPlay=!1,this.currentAudio.duration="",this.currentAudio.currentTime="")},pause:function(){this.currentAudio.audio&&(this.currentAudio.isLoading=!1,this.currentAudio.isPlay=!1,this.currentAudio.audio.pause())},seek:function(time){this.currentAudio.audio&&(this.currentAudio.seeking=!1,this.currentAudio.currentTime=time,this.currentAudio.audio.currentTime=time)},seeking:function(time){this.currentAudio.seeking=!0,this.currentAudio.currentTime=time}}},f=(n(975),n(12)),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-container",style:{padding:t.padding}},[t.item.thread.isEssence?n("div",{staticClass:"essence"},[n("svg-icon",{attrs:{type:"index-essence"}})],1):t._e(),t._v(" "),5===t.item.thread.type&&t.item.thread.extension.question&&1===t.item.thread.extension.question.isAnswer?n("avatar",{staticClass:"avatar",attrs:{user:{id:t.item.thread.extension.question.beUserId,username:t.item.thread.extension.question.beUserName},"prevent-jump":t.canDetail}}):t.item.user?n("avatar",{staticClass:"avatar",attrs:{user:{id:t.item.user.pid,username:t.item.user.userName,avatarUrl:t.item.user.avatar,isReal:t.item.user.isRealName},"prevent-jump":t.canDetail}}):t._e(),t._v(" "),n("div",{staticClass:"main-cont"},[n("div",{staticClass:"top-flex"},[n("div",{staticClass:"top-user-info"},[5===t.item.thread.type&&t.item.thread.extension.question&&1===t.item.thread.extension.question.isAnswer?n("nuxt-link",{staticClass:"user-info",attrs:{to:t.item.user.pid>0?"/user/"+t.item.thread.extension.question.beUserId:""}},[n("span",{staticClass:"user-name"},[t._v(t._s(t.item.thread.extension.question.beUserName))]),t._v(" "),t.item.thread.extension&&t.item.thread.extension.question&&t.item.thread.extension.question.group&&t.item.thread.extension.question.group.isDisplay?n("span",{staticClass:"admin"},[t._v("\n            ("+t._s(t.item.thread.extension.question.group.groupName)+")\n          ")]):t._e()]):t.item.user?n("nuxt-link",{staticClass:"user-info",attrs:{to:t.item.user.pid>0?"/user/"+t.item.user.pid:""}},[n("span",{staticClass:"user-name"},[t._v(t._s(t.item.user.userName))]),t._v(" "),t.item.group?n("span",{staticClass:"admin"},[t._v("\n            "+t._s(t.item.group.isDisplay?"("+t.item.group.groupName+")":"")+"\n          ")]):t._e()]):t._e(),t._v(" "),5===t.item.thread.type&&t.item.thread.extension.question&&1===t.item.thread.extension.question.isAnswer?n("div",{staticClass:"answered"},[t._v("\n          "+t._s(t.$t("topic.answered"))+"\n        ")]):t._e()],1),t._v(" "),n("div",{staticClass:"time"},[t.item.thread.createdAt?[t._v(t._s(t.$t("topic.publishAt"))+"\n          "+t._s(t._f("formatDate")(t.item.thread.createdAt)))]:t._e()],2)]),t._v(" "),5===t.item.thread.type?n("div",{staticClass:"question-user"},[t.item.thread.extension.question&&0===t.item.thread.extension.question.isAnswer?[t._v("\n        "+t._s(t.$t("topic.be"))+"\n        "),t.item.thread.extension.question?n("nuxt-link",{staticClass:"grey",attrs:{to:t.item.thread.extension.question.beUserId>0?"/user/"+t.item.thread.extension.question.beUserId:""}},[t._v("@"+t._s(t.item.thread.extension.question.beUserName))]):t._e(),t._v("\n        "+t._s(t.$t("topic.question"))+"\n      ")]:t._e(),t._v(" "),t.item.thread.extension.question&&1===t.item.thread.extension.question.isAnswer?[t._v("\n        "+t._s(t.$t("topic.answer"))+"\n        "),t.item.user?n("nuxt-link",{staticClass:"grey",attrs:{to:t.item.user.pid>0?"/user/"+t.item.user.pid:""}},[t._v("@"+t._s(t.item.user.userName))]):t._e(),t._v("\n        "+t._s(t.$t("topic.of"))+t._s(t.$t("topic.question"))+"\n      ")]:t._e()],2):t._e(),t._v(" "),[n("div",{staticClass:"first-post",on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail(e)}}},[n("a",{attrs:{href:"/thread/"+(t.item&&t.item.thread.pid)},on:{click:function(e){return e.preventDefault(),t.onClickContent(e)}}},[1===t.item.thread.type?n("div",{staticClass:"title"},[t._v("\n            "+t._s(t.$t("home.released"))+"\n            "),n("svg-icon",{directives:[{name:"show",rawName:"v-show",value:parseFloat(t.item.thread.price)>0||parseFloat(t.item.thread.attachmentPrice)>0,expression:"\n                parseFloat(item.thread.price) > 0 ||\n                  parseFloat(item.thread.attachmentPrice) > 0\n              "}],staticClass:"blue icon-pay-yuan-inline",attrs:{type:"pay-yuan"}}),t._v(" "),n("span",{staticClass:"blue"},[t._v(t._s(t.item.thread.title))])],1):n("div",{staticClass:"content"},[5===t.item.thread.type?n("svg-icon",{staticClass:"icon-pay-yuan blue",attrs:{type:"question-icon"}}):6===t.item.thread.type?n("svg-icon",{staticClass:"icon-pay-yuan blue",attrs:{type:"product-icon"}}):parseFloat(t.item.thread.price)>0||parseFloat(t.item.thread.attachmentPrice)>0?n("svg-icon",{staticClass:"icon-pay-yuan grey",attrs:{type:"pay-yuan"}}):t._e(),t._v(" "),n("div",{class:{"content-block":5===t.item.thread.type||6===t.item.thread.type||parseFloat(t.item.thread.price)>0,blue:5===t.item.thread.type},domProps:{innerHTML:t._s(t.$xss(t.formatTopicHTML(t.item.thread.summary)))}})],1)]),t._v(" "),t.item.attachment&&t.item.attachment.length>0?n("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{url:"data-source"},expression:"{ url: 'data-source' }"}],staticClass:"images",on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail(e)}}},t._l(t.item.attachment.slice(0,3),(function(image,e){return n("el-image",{key:e,class:{image:!0,infoimage:t.infoimage},attrs:{src:image.thumbUrl,"data-source":t.unpaid?"":image.url,alt:image.filename,fit:"cover",lazy:t.lazy},on:{click:function(e){return e.target!==e.currentTarget?null:t.onClickImage(e)}}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[n("i",{staticClass:"el-icon-loading"})])])})),1):t._e(),t._v(" "),t.item.attachment&&t.item.attachment.length>3?n("div",{staticClass:"image-count",on:{click:t.toDetail}},[t._v("\n          "+t._s(t.$t("home.total"))+" "+t._s(t.item.attachment.length)+"\n          "+t._s(t.$t("home.seeAllImage"))+"\n        ")]):t._e(),t._v(" "),2===t.item.thread.type&&t.item.thread.extension.video?n("div",{staticClass:"video-main",on:{click:function(e){return e.stopPropagation(),t.openVideo(e)}}},[t.item.thread.extension.video.coverUrl?n("el-image",{staticClass:"video-img-cover",attrs:{src:t.item.thread.extension.video.coverUrl,alt:t.item.thread.extension.video.fileName,fit:"cover",lazy:t.lazy}}):n("div",{staticClass:"no-cover"},[t._v(t._s(t.$t("home.noPoster")))]),t._v(" "),n("svg-icon",{staticClass:"video-play",attrs:{type:"video-play"}})],1):t._e(),t._v(" "),t.item.attachments&&t.item.attachments.length>0?n("div",{staticClass:"attachment",on:{click:t.toDetail}},[n("svg-icon",{attrs:{type:t.extensionValidate(t.item.attachments[0].extension)}}),t._v(" "),n("div",{staticClass:"name text-hidden"},[t._v("\n            "+t._s(t.item.attachments[0].fileName)+"\n          ")]),t._v(" "),t.item.attachments.length>1?n("div",{staticClass:"total"},[t._v("\n            "+t._s(t.$t("home.etc")+t.item.attachments.length+t.$t("home.attachmentTotal"))+"\n          ")]):t._e()],1):t._e()]),t._v(" "),6===t.item.thread.type?n("product-items",{attrs:{item:t.item.thread.extension&&t.item.thread.extension.goods}}):t._e(),t._v(" "),4===t.item.thread.type?n("div",{on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail(e)}}},[n("APlayers",{attrs:{file:t.item.thread&&t.item.thread.extension&&t.item.thread.extension.video,"current-audio":t.currentAudio},on:{play:t.play,pause:t.pause,seek:t.seek,seeking:t.seeking}}),t._v(" "),n("audio",{staticClass:"audio-players",staticStyle:{display:"none"},attrs:{id:"audio-players"+(t.item.thread&&t.item.thread.pid),src:t.currentAudio.url}})],1):t._e(),t._v(" "),t.item.thread.location?n("nuxt-link",{staticClass:"location",attrs:{to:"/topic/position?longitude="+t.item.thread.longitude+"&latitude="+t.item.thread.latitude}},[n("span",{staticClass:"flex"},[n("svg-icon",{staticClass:"icon",attrs:{type:"location"}}),t._v("\n          "+t._s(t.item.thread.location)+"\n        ")],1)]):t._e(),t._v(" "),t.canDetail?t._e():n("div",{staticClass:"bottom-handle"},[n("div",{staticClass:"left"},[t.showLike?n("div",{staticClass:"btn like",class:{liked:t.isLiked},on:{click:t.handleLike}},[n("svg-icon",{staticClass:"icon",attrs:{type:"like"},on:{click:t.handleLike}}),t._v("\n            "+t._s(t.isLiked?t.$t("topic.liked"):t.$t("topic.like"))+"\n            "+t._s(t.likeCount>0?t.likeCount:"")+"\n          ")],1):t._e(),t._v(" "),t.showComment?n("div",{staticClass:"btn comment",on:{click:t.toDetail}},[n("svg-icon",{staticClass:"icon",attrs:{type:"post-comment"}}),t._v("\n            "+t._s(t.$t("topic.comment"))+"\n            "+t._s(t.item.thread.postCount>0?t.item.thread.postCount:"")+"\n          ")],1):t._e(),t._v(" "),t.item.thread&&t.item.thread.pid&&t.showShare?n("share-popover",{attrs:{"threads-id":t.item.thread.pid}},[n("div",{staticClass:"btn share"},[n("svg-icon",{staticClass:"icon",attrs:{type:"link"}}),t._v("\n              "+t._s(t.$t("topic.share"))+"\n            ")],1)]):t._e(),t._v(" "),t._t("btn-edit"),t._v(" "),t._t("btn-delete")],2),t._v(" "),t._t("bottom-right")],2)]],2),t._v(" "),t.showVideoPop?n("dplayer-pop",{attrs:{"cover-url":t.item.thread.extension.video.coverUrl,url:t.item.thread.extension.video.mediaUrl},on:{remove:function(e){t.showVideoPop=!1}}}):t._e()],1)}),[],!1,null,"f59ed810",null);e.default=component.exports;installComponents(component,{SvgIcon:n(78).default,Avatar:n(344).default,ProductItems:n(943).default,SharePopover:n(887).default,DplayerPop:n(876).default})},1031:function(t,e,n){"use strict";n.r(e);var r=n(79),o=(n(32),n(873)),c=n.n(o),d=n(210),l={name:"Category",mixins:[c.a],props:{postLoading:{type:Boolean,default:!1},list:{type:Array,default:function(){return[]}}},data:function(){return{categoryList:[],selectId:0,selectId_parent:0}},watch:{list:{handler:function(t){0===this.categoryList.length&&this.handleData(t)},deep:!0}},mounted:function(){0===this.categoryList.length&&this.getCategoryList(),this.$route.params.id&&(this.selectId=+this.$route.params.id)},methods:{getCategoryList:function(){var t=this;d.a.readCategories().then((function(e){var n=Object(r.a)(e.Data)||[];t.handleData(n)}),(function(e){t.handleError(e)}))},handleData:function(data){var t=this,e=0;this.categoryList=[],data.forEach((function(n){var r=!1,o=[];e+=n.threadCount,n.children&&n.children.length>0&&(r=!0,n.children.forEach((function(t){o.push({id:parseInt(t.pid),search_ids:t.searchIds,name:t.name,thread_count:t.threadCount})}))),t.categoryList.push({id:parseInt(n.pid),search_ids:n.searchIds,name:n.name,thread_count:n.threadCount,hasChild:r,children:o})})),this.categoryList.unshift({id:0,search_ids:"0",name:this.$t("topic.whole"),thread_count:e}),this.categoryList.forEach((function(e){e.id===t.selectId?t.selectId_parent=e.id:e.children&&e.children.forEach((function(n){n.id===t.selectId&&(t.selectId_parent=e.id)}))}))},onChange:function(t,e,n){this.postLoading||(this.selectId=t,this.selectId_parent=e,this.$emit("onChange",{id:t,search_ids:n}))}}},h=(n(979),n(12)),component=Object(h.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.categoryList&&t.categoryList.length>0?n("div",{staticClass:"category-container"},t._l(t.categoryList,(function(e,r){return n("div",{key:r},[n("div",{staticClass:"category-item",class:{active:t.selectId===e.id||t.selectId_parent===e.id,loading:t.postLoading},on:{click:function(n){return t.onChange(e.id,e.id,e.search_ids)}}},[t.selectId_parent===e.id?n("i",{staticClass:"el-icon-arrow-left arrow-icon"}):t._e(),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"count"},[t._v(t._s(e.thread_count))])]),t._v(" "),e.hasChild&&e.children.length>0?n("div",t._l(e.children,(function(r,o){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.selectId_parent===e.id,expression:"selectId_parent === item.id"}],key:o,staticClass:"category-item category-item-sub",class:{active:t.selectId===r.id,loading:t.postLoading},on:{click:function(n){return t.onChange(r.id,e.id,r.search_ids)}}},[n("div",{staticClass:"title"},[t._v(t._s(r.name))]),t._v(" "),n("div",{staticClass:"count"},[t._v(t._s(r.thread_count))])])})),0):t._e()])})),0):t._e()}),[],!1,null,"369670e2",null);e.default=component.exports},1032:function(t,e,n){"use strict";n.r(e);n(14),n(32);var r=n(878),time=n(875),o=n(879),c=n(873),d=n.n(c),l=n(208),h=n.n(l),m={name:"PostItemPays",filters:{formatDate:function(t){return Object(time.b)(t)}},mixins:[d.a,h.a],props:{item:{type:Object,default:function(){}},showLike:{type:Boolean,default:!0},showComment:{type:Boolean,default:!0},showShare:{type:Boolean,default:!0},lazy:{type:Boolean,default:!0},infoimage:{type:Boolean,default:!1},canDetail:{type:Boolean,default:!1},padding:{type:String,default:"20.5px 20px 30px"}},data:function(){return{loading:!1,showVideoPop:!1,isLiked:!1,currentAudio:{id:"",url:"",currentTime:"",duration:"",audio:"",seeking:!1,isPlay:!1,isLoading:!1}}},computed:{unpaid:function(){return!(this.item.thread.paid||0===parseFloat(this.item.thread.price))},forums:function(){return this.$store.state.site.info.attributes||{}},integral:function(){return this.forums&&this.forums.set_site&&this.forums.set_site.site_integral&&this.forums.set_site.site_integral[3].ivalue},unintegral:function(){return this.forums&&this.forums.set_site&&this.forums.set_site.site_integral&&this.forums.set_site.site_integral[3].unvalue}},watch:{item:{handler:function(t){this.isLiked=t.thread&&t.thread.isLiked,this.likeCount=t.thread&&t.thread.likedCount},deep:!0,immediate:!0}},mounted:function(){this.currentAudio.audio=document.getElementById("audio-players".concat(this.item&&this.item.thread&&this.item.thread.pid))},methods:{handleLike:function(){var t=this;if(this.$store.getters["session/get"]("isLogin")){if(this.loading)return;if(!this.item.thread.canLike)return void this.$message.error(this.$t("topic.noThreadLikePermission"));this.loading=!0;var e=!this.isLiked,n={_jv:{type:"posts",id:this.item.thread&&this.item.thread.firstPostId},isLiked:e};return this.$store.dispatch("jv/patch",n).then((function(){0==t.integral?t.$message.success(e?t.$t("discuzq.msgBox.likeSuccess"):t.$t("discuzq.msgBox.cancelLikeSuccess")):t.$message.success(e?t.$t("discuzq.msgBox.likeSuccess")+" 奖励积分：+"+t.integral:t.$t("discuzq.msgBox.cancelLikeSuccess")+" 减掉积分：-"+t.unintegral),e?t.likeCount+=1:t.likeCount-=1,t.isLiked=e,t.$emit("change")}),(function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}this.$message.warning("请登录"),window.setTimeout((function(){t.headerTologin()}),1e3)},toDetail:function(){this.item.thread.isDraft||this.canViewPostsFn()&&this.routerLink()},onClickImage:function(){this.unpaid&&this.canViewPostsFn()&&this.routerLink()},openVideo:function(){this.canViewPostsFn()&&(this.unpaid?this.routerLink():"/"===this.$route.path||"/site/search"===this.$route.path||"category-id"===this.$route.name?this.$emit("showVideoFn",this.item.thread.extension.video):this.showVideoPop=!0)},routerLink:function(){window.open("/thread/".concat(this.item.thread&&this.item.thread.pid),"_blank")},onClickContent:function(t){if(!this.item.isDraft){var e=t||window.event;"a"!==(e.target||e.srcElement).nodeName.toLocaleLowerCase()&&this.toDetail()}},canViewPostsFn:function(){var t=this;return this.item.thread.canViewPost?!this.canDetail||(this.$message.warning(this.$t("topic.joinAfterView")),!1):(this.$store.getters["session/get"]("isLogin")?this.$message.warning(this.$t("home.noPostingTopic")):(this.$message.warning(this.$t("core.not_authenticated")),window.setTimeout((function(){t.headerTologin()}),1e3)),!1)},formatTopicHTML:function(html){return r.a.parse(html)},extensionValidate:function(t){return o.extensionList.indexOf(t.toUpperCase())>0?t.toUpperCase():"UNKNOWN"},play:function(t){var e=this;this.unpaid?this.routerLink():this.canViewPostsFn()&&this.currentAudio.audio&&(this.currentAudio.id!==t.pid&&(this.resetAudio(this.currentAudio.audio),this.currentAudio.url=t.coverUrl||t.mediaUrl,this.currentAudio.id=t.pid,this.currentAudio.audio.src=this.currentAudio.url,this.currentAudio.isLoading=!0,this.currentAudio.audio.load()),window.setTimeout((function(){e.currentAudio.audio.play(),e.currentAudio.isPlay=!0,e.currentAudio.audio.addEventListener("timeupdate",e.onProgressing),e.currentAudio.audio.addEventListener("ended",e.onEnded),e.$emit("audioPlay",e.currentAudio.id)}),0))},onProgressing:function(){this.currentAudio.seeking||(this.currentAudio.isLoading=!1,this.currentAudio.duration=this.currentAudio.audio.duration,this.currentAudio.currentTime=this.currentAudio.audio.currentTime)},onEnded:function(){this.resetAudio(this.currentAudio.audio)},resetAudio:function(audio){audio&&(audio.removeEventListener("timeupdate",this.onProgressing),audio.removeEventListener("ended",this.onEnded),this.currentAudio.isPlay=!1,this.currentAudio.duration="",this.currentAudio.currentTime="")},pause:function(){this.currentAudio.audio&&(this.currentAudio.isLoading=!1,this.currentAudio.isPlay=!1,this.currentAudio.audio.pause())},seek:function(time){this.currentAudio.audio&&(this.currentAudio.seeking=!1,this.currentAudio.currentTime=time,this.currentAudio.audio.currentTime=time)},seeking:function(time){this.currentAudio.seeking=!0,this.currentAudio.currentTime=time}}},f=(n(980),n(12)),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"add-padding-line"},[r("div",{staticClass:"post-container"},[t.item.thread.isEssence?r("div",{staticClass:"essence"},[r("img",{attrs:{src:n(885),alt:""}})]):t._e(),t._v(" "),r("div",{staticClass:"post-header"},[5===t.item.thread.type&&t.item.thread.extension.question&&1===t.item.thread.extension.question.isAnswer?r("avatar",{staticClass:"avatar",attrs:{user:{id:t.item.thread.extension.question.beUserId,username:t.item.thread.extension.question.beUserName},size:"40",round:!0,"prevent-jump":t.canDetail}}):t.item.user?r("avatar",{staticClass:"avatar",attrs:{user:{id:t.item.user.pid,username:t.item.user.userName,avatarUrl:t.item.user.avatar,isReal:t.item.user.isRealName},size:"40",round:!0,"prevent-jump":t.canDetail}}):t._e(),t._v(" "),5===t.item.thread.type&&t.item.thread.extension.question&&1===t.item.thread.extension.question.isAnswer?r("nuxt-link",{staticClass:"user-info",attrs:{to:t.item.user.pid>0?"/user/"+t.item.thread.extension.question.beUserId:""}},[r("span",{staticClass:"user-name"},[t._v(t._s(t.item.thread.extension.question.beUserName))]),t._v(" "),r("img",{staticClass:"growup-img",attrs:{src:t.item.user.growup.growupimageUrl}}),t._v(" "),t.item.thread.extension&&t.item.thread.extension.question&&t.item.thread.extension.question.group&&t.item.thread.extension.question.group.isDisplay?r("span",{staticClass:"admin"},[t._v("\n          ("+t._s(t.item.thread.extension.question.group.groupName)+")\n        ")]):t._e()]):t.item.user?r("nuxt-link",{staticClass:"user-info",attrs:{to:t.item.user.pid>0?"/user/"+t.item.user.pid:""}},[r("span",{staticClass:"user-name"},[t._v(t._s(t.item.user.userName))]),t._v(" "),r("img",{staticClass:"growup-img",attrs:{src:t.item.user.growup.growupimageUrl}}),t._v(" "),t.item.group?r("span",{staticClass:"admin"},[t._v("\n          "+t._s(t.item.group.isDisplay?"("+t.item.group.groupName+")":"")+"\n        ")]):t._e()]):t._e(),t._v(" "),5===t.item.type&&t.item.thread.extension.question&&1===t.item.thread.extension.question.isAnswer?r("div",{staticClass:"answered"},[t._v(t._s(t.$t("topic.answered")))]):t._e()],1),t._v(" "),r("div",{staticClass:"post-content"},[r("div",{staticClass:"first-post",on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail(e)}}},[r("div",{staticClass:"first-post-desc",on:{click:t.onClickContent}},[r("div",{staticClass:"first-post-desc__tips"},[0!==t.item.thread.type&&1!==t.item.thread.type||!t.item.thread.isRedPacket?t._e():r("img",{staticClass:"first-post-img",attrs:{src:n(901)}}),t._v(" "),5===t.item.thread.type&&t.item.rewards&&0===t.item.rewards.type?r("img",{staticClass:"first-post-img",attrs:{src:n(902)}}):5===t.item.thread.type?r("img",{staticClass:"first-post-img",attrs:{src:n(903)}}):t._e(),t._v(" "),6===t.item.thread.type?r("img",{staticClass:"first-post-img",attrs:{src:n(951)}}):t._e(),t._v(" "),7===t.item.thread.type?r("img",{staticClass:"first-post-img",attrs:{src:n(952)}}):t._e(),t._v(" "),5===t.item.thread.type&&t.item.rewards&&0===t.item.rewards.type?r("span",{staticClass:"first-post-tip"},[t._v("【￥"+t._s(t.item.rewards.money)+"】")]):t._e(),t._v(" "),parseFloat(t.item.thread.price)>0||parseFloat(t.item.thread.attachmentPrice)>0?r("img",{staticClass:"first-post-coin",attrs:{src:n(889)}}):t._e()]),t._v(" "),1===t.item.thread.type?r("p",{staticClass:"content"},[t._v(t._s(t.item.thread.title))]):r("p",{staticClass:"content",domProps:{innerHTML:t._s(t.$xss(t.formatTopicHTML(t.item.thread.summary)))}}),t._v(" "),0!==t.item.thread.type&&3!==t.item.thread.type?r("p",{staticClass:"content",domProps:{innerHTML:t._s(t.$xss(t.formatTopicHTML(t.item.thread.description)))}}):t._e(),t._v(" "),5===t.item.thread.type?r("span",[t.item.thread.extension&&t.item.thread.extension.question&&0===t.item.thread.extension.question.isAnswer?[t.item.thread.extension&&t.item.thread.extension.question&&t.item.thread.extension.question.beUserId?r("nuxt-link",{staticClass:"questioner",attrs:{to:t.item.thread.extension.question.beUserId>0?"/user/"+t.item.thread.extension.question.beUserId:""}},[t._v("@"+t._s(t.item.thread.extension.question.beUserName))]):t._e()]:t._e(),t._v(" "),t.item.thread.extension&&t.item.thread.extension.question&&1===t.item.thread.extension.question.isAnswer?[t.item.user?r("nuxt-link",{staticClass:"questioner",attrs:{to:t.item.user.pid>0?"/user/"+t.item.user.pid:""}},[t._v("@"+t._s(t.item.user.userName))]):t._e()]:t._e()],2):t._e()]),t._v(" "),t.item.attachment&&t.item.attachment.length>0?r("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{url:"data-source"},expression:"{ url: 'data-source' }"}],staticClass:"images",on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail(e)}}},t._l(t.item.attachment.slice(0,3),(function(image,e){return r("el-image",{key:e,class:{image:!0,infoimage:t.infoimage},attrs:{src:image.thumbUrl,"data-source":t.unpaid?"":image.url,alt:image.filename,fit:"cover",lazy:t.lazy},on:{click:function(e){return e.target!==e.currentTarget?null:t.onClickImage(e)}}},[r("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[r("i",{staticClass:"el-icon-loading"})])])})),1):t._e(),t._v(" "),t.item.attachment&&t.item.attachment.length>3?r("div",{staticClass:"image-count",on:{click:t.toDetail}},[t._v("\n          "+t._s(t.$t("home.total"))+" "+t._s(t.item.attachment.length)+"\n          "+t._s(t.$t("home.seeAllImage"))+"\n        ")]):t._e(),t._v(" "),2===t.item.thread.type&&t.item.thread.extension.video?r("div",{staticClass:"video-main",on:{click:function(e){return e.stopPropagation(),t.openVideo(e)}}},[t.item.thread.extension.video.coverUrl?r("el-image",{staticClass:"video-img-cover",attrs:{src:t.item.thread.extension.video.coverUrl,alt:t.item.thread.extension.video.fileName,fit:"cover",lazy:t.lazy}}):r("div",{staticClass:"no-cover"},[t._v(t._s(t.$t("home.noPoster")))]),t._v(" "),r("svg-icon",{staticClass:"video-play",attrs:{type:"video-play"}})],1):t._e(),t._v(" "),t.item.attachments&&t.item.attachments.length>0?r("div",{staticClass:"attachment",on:{click:t.toDetail}},[r("svg-icon",{attrs:{type:t.extensionValidate(t.item.attachments[0].extension)}}),t._v(" "),r("div",{staticClass:"name text-hidden"},[t._v("\n            "+t._s(t.item.attachments[0].fileName)+"\n          ")]),t._v(" "),t.item.attachments.length>1?r("div",{staticClass:"total"},[t._v("\n            "+t._s(t.$t("home.etc")+t.item.attachments.length+t.$t("home.attachmentTotal"))+"\n          ")]):t._e()],1):t._e()]),t._v(" "),6===t.item.thread.type?r("product-items",{attrs:{item:t.item.thread.extension&&t.item.thread.extension.goods}}):t._e(),t._v(" "),4===t.item.thread.type?r("div",{on:{click:function(e){return e.target!==e.currentTarget?null:t.toDetail(e)}}},[r("APlayers",{attrs:{file:t.item.thread&&t.item.thread.extension&&t.item.thread.extension.video,"current-audio":t.currentAudio},on:{play:t.play,pause:t.pause,seek:t.seek,seeking:t.seeking}}),t._v(" "),r("audio",{staticClass:"audio-players",staticStyle:{display:"none"},attrs:{id:"audio-players"+(t.item.thread&&t.item.thread.pid),src:t.currentAudio.url}})],1):t._e(),t._v(" "),t.item.thread.location?r("nuxt-link",{staticClass:"location",attrs:{to:"/topic/position?longitude="+t.item.thread.longitude+"&latitude="+t.item.thread.latitude}},[r("span",{staticClass:"flex"},[r("svg-icon",{staticClass:"icon",attrs:{type:"location"}}),t._v("\n          "+t._s(t.item.thread.location)+"\n        ")],1)]):t._e()],1),t._v(" "),r("div",{staticClass:"post-footer"},[r("div",{staticClass:"time"},[t.item.thread.createdAt?[t._v("\n          "+t._s(t.item.thread.isDraft?t.$t("topic.saveAt"):t.$t("topic.publishAt"))+"\n          "+t._s(t._f("formatDate")(t.item.thread.createdAt))+"\n        ")]:t._e()],2),t._v(" "),t.canDetail?t._e():r("div",{staticClass:"handle-btn"},[t.showLike?r("div",{staticClass:"btn like",class:{liked:t.isLiked},on:{click:t.handleLike}},[r("svg-icon",{staticClass:"icon",attrs:{type:"like"},on:{click:t.handleLike}}),t._v("\n          "+t._s(t.isLiked?t.$t("topic.liked"):t.$t("topic.like"))+"\n          "+t._s(t.likeCount>0?t.likeCount:"")+"\n        ")],1):t._e(),t._v(" "),t.showComment?r("div",{staticClass:"btn comment",on:{click:t.toDetail}},[r("svg-icon",{staticClass:"icon",attrs:{type:"post-comment"}}),t._v("\n          "+t._s(t.$t("topic.comment"))+"\n          "+t._s(t.item.thread.postCount>0?t.item.thread.postCount:"")+"\n        ")],1):t._e(),t._v(" "),t.item.thread&&t.item.thread.pid&&t.showShare?r("share-popover",{attrs:{"threads-id":t.item.thread.pid}},[r("div",{staticClass:"btn share"},[r("svg-icon",{staticClass:"icon",attrs:{type:"link"}}),t._v("\n            "+t._s(t.$t("topic.share"))+"\n          ")],1)]):t._e(),t._v(" "),t._t("bottom-right"),t._v(" "),t._t("btn-edit"),t._v(" "),t._t("btn-delete")],2)]),t._v(" "),t.showVideoPop?r("dplayer-pop",{attrs:{"cover-url":t.item.thread.extension.video.coverUrl,url:t.item.thread.extension.video.mediaUrl},on:{remove:function(e){t.showVideoPop=!1}}}):t._e()],1)])}),[],!1,null,"42d9a827",null);e.default=component.exports;installComponents(component,{Avatar:n(344).default,SvgIcon:n(78).default,ProductItems:n(943).default,SharePopover:n(887).default,DplayerPop:n(876).default})},1033:function(t,e,n){"use strict";n.r(e);n(14),n(45);var r=n(873),o={name:"RecommendContent",mixins:[n.n(r).a],props:{list:{type:Array,default:function(){return[]}}},data:function(){return{contentList:[],loading:!1}},watch:{list:{handler:function(t){this.contentList=t},deep:!0}},mounted:function(){0===this.contentList.length&&this.getList()},methods:{getList:function(){var t=this;this.contentList=[],this.loading=!0,this.$store.dispatch("jv/get",["threads/recommend",{}]).then((function(e){var data=e.slice(0,5);t.contentList=data}),(function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},refresh:function(){this.getList()}}},c=(n(981),n(12)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"recommend-content-container"},[n("div",{staticClass:"recommend-content-title"},[t._v(t._s(t.$t("home.recommentContent")))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"recommend-content-list"},[t._l(t.contentList,(function(t,e){return n("content-item",{key:e,attrs:{item:t}})})),t._v(" "),0===t.contentList.length?n("div",{staticClass:"no-more"},[t._v(t._s(t.$t("discuzq.list.noData")))]):t._e()],2),t._v(" "),n("div",{staticClass:"refresh",on:{click:t.refresh}},[n("svg-icon",{staticClass:"icon",attrs:{type:"refresh"}}),t._v("\n    "+t._s(t.$t("home.refresh"))+"\n  ")],1)])}),[],!1,null,"5df467df",null);e.default=component.exports;installComponents(component,{ContentItem:n(1034).default,SvgIcon:n(78).default})},1034:function(t,e,n){"use strict";n.r(e);n(66),n(45);var r={name:"ContentItem",props:{item:{type:Object,default:function(){}}},data:function(){return{}},methods:{toContent:function(){this.$router.push("/thread/".concat(this.item._jv.id))},handleContent:function(content){var t=content.replace(/:[a-z]+:/g,"").replace(/\s{3,}/g," ");return 0===this.item.type?t=t.slice(0,18):1===this.item.type?t=t.slice(0,20):5===this.item.type&&(t=t.slice(0,10)),t.length<9?t:"".concat(t,"...")}}},o=(n(982),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content-item-container",on:{click:t.toContent}},[r("div",{staticClass:"content-item-tips"},[0!==t.item.type&&1!==t.item.type||!t.item.isRedPacket?t._e():r("img",{staticClass:"item-img",attrs:{src:n(901)}}),t._v(" "),5===t.item.type&&t.item.questionTypeAndMoney&&0===t.item.questionTypeAndMoney.type?r("img",{staticClass:"item-img",attrs:{src:n(902)}}):5===t.item.type?r("img",{staticClass:"item-img",attrs:{src:n(903)}}):t._e(),t._v(" "),5===t.item.type&&t.item.questionTypeAndMoney&&0===t.item.questionTypeAndMoney.type?r("span",{staticClass:"item-tip"},[t._v("【￥"+t._s(t.item.questionTypeAndMoney.money)+"】")]):t._e()]),t._v(" "),1===t.item.type?r("p",{staticClass:"content"},[t._v("\n    "+t._s(t.handleContent(t.item.title))+"\n  ")]):r("p",{staticClass:"content"},[t._v("\n    "+t._s(t.handleContent(t.item.postContent))+"\n  ")]),t._v(" "),r("span",{staticClass:"read-count"},[t._v("\n    "+t._s(t.item.viewCount)+"人已读\n  ")])])}),[],!1,null,"281af4ac",null);e.default=component.exports},1248:function(t,e,n){},1365:function(t,e,n){"use strict";n(1248)},1464:function(t,e,n){"use strict";n.r(e);n(13),n(23),n(24);var r=n(79),o=n(7),c=n(9),d=(n(20),n(18),n(32),n(89),n(17),n(964),n(46),n(14),n(40),n(55),n(878)),head=n(874),l=n.n(head),h=n(973),m=n.n(h),f=n(873),v=n.n(f),_=n(212),y=n(210);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function w(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var A={name:"Index",layout:"custom_layout",mixins:[l.a,v.a,m.a],asyncData:function(t,e){return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,c,d,l,h,m,f,v,C,A,k,x,$,L,D,P,T,I;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.store,o=t.params,c=t.query,_.a.isSpider||e(null,{}),d={},l=[],(l=c.search_ids||"1"===c.search_ids?"string"==typeof c.search_ids?[c.search_ids]:c.search_ids:[]).length>0&&(d.categoryids=l),h={page:1,filter:{sticky:0,essence:0}},n.prev=7,m={},n.next=11,y.a.readStickList({params:d});case 11:return f=n.sent,n.next=14,y.a.readThreadList({params:h});case 14:return v=n.sent,n.next=17,y.a.readCategories();case 17:return C=n.sent,n.next=20,r.dispatch("jv/get",["threads/recommend",{}]);case 20:A=n.sent,Array.isArray(f)?m.threadsStickyData=f.Data:f&&f._jv&&f._jv.json&&((k=f._jv.json.data||[]).forEach((function(t,e){k[e]=w(w(w({},t),t.attributes),{},{firstPost:t.relationships.firstPost.data,jv:{id:t.id}})})),m.threadsStickyData=k),Array.isArray(v)?(m.threadsData=v.Data,v.Data.forEach((function(t){t.id=t.thread&&t.thread.pid,t.attachment.length>0&&(t.attachment=t.attachment.filter((function(t){return t.thumbUrl})))}))):v&&v._jv&&v._jv.json&&((x=v._jv.json.data||[]).forEach((function(t,e){x[e]=w(w(w({},t),t.attributes),{},{firstPost:t.relationships.firstPost.data,user:t.relationships.user.data,_jv:{id:t.id}})})),m.threadsData=x),Array.isArray(C)?(m.categoryData=C.Data,$=[],C.Data.forEach((function(t){$.push({id:t&&+t.pid,name:t.name}),t.children&&t.children.forEach((function(e){$.push({id:+e.pid,name:"".concat(t.name," - ").concat(e.name)})}))})),(L=$.find((function(t){return t.id===+o.id})))&&(m.title=L.name||"分类")):C&&C._jv&&C._jv.json&&(D=C._jv.json.data||[],P=[],D.forEach((function(t){P.push({id:t._jv&&+t._jv.id,name:t.name}),t.children&&t.children.forEach((function(e){P.push({id:+e.id,name:"".concat(t.name," - ").concat(e.name)})}))})),(T=P.find((function(t){return t.id===+o.id})))&&(m.title=T.name||"分类"),m.categoryData=D),Array.isArray(A)?m.recommendContentData=A:A&&A._jv&&A._jv.json&&((I=I._jv.json.data||[]).forEach((function(t,e){I[e]=w(w({},t),t.attributes)})),m.recommendContentData=I),e(null,m),n.next=31;break;case 28:n.prev=28,n.t0=n.catch(7),e(null,{_error__abc:{error_keys:Object.keys(n.t0),error:String(n.t0),errno:n.t0.errno,code:n.t0.code,syscall:n.t0.syscall,address:n.t0.address,port:n.t0.port,config:n.t0.config,request_domain:(n.t0.request||{}).domain,request_keys:Object.keys(n.t0.request||{}),response_keys:Object.keys(n.t0.response||{})}});case 31:case"end":return n.stop()}}),n,null,[[7,28]])})))()},data:function(){return{isSpider:_.a.isSpider,loading:!1,threadsStickyData:[],threadsData:[],categoryData:[],recommendContentData:[],pageNum:1,pageSize:10,categoryId:0,threadType:"",sort:"",threadEssence:"",fromUserId:0,hasMore:!1,timer:null,threadCount:0,total:0,currentAudioId:"",showVideoPop:!1,threadVideo:{},threadIdSet:new Set,newData:""}},computed:{userId:function(){return this.$store.getters["session/get"]("userId")},forums:function(){return this.$store.state.site.info.attributes||{}}},mounted:function(){var t=this;this.$route.params.id&&(this.categoryId=this.$route.params.id,this.getCategoryList()),0===this.threadsStickyData.length&&this.getThreadsSticky(),0===this.threadsData.length?this.getThreadsList():(this.newData.currentPage<this.newData.totalPage&&(this.hasMore=!0),this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){t.autoLoadThreads()}),3e4)),this.preThreadsData=null,this.preThreadsLoading=!1},destroyed:function(){clearInterval(this.timer)},methods:{preLoadThreads:function(){var t=this;if(!this.preThreadsData&&!this.preThreadsLoading){this.preThreadsLoading=!0;var e=this.getThreadsParams();return y.a.readThreadList({params:e}).then((function(n){t.preThreadsData=Object(o.a)({},e.page,n)})).catch((function(){t.preThreadsData=null})).finally((function(){t.preThreadsLoading=!1}))}},getThreadsParams:function(){var t={};t={page:this.pageNum,perPage:this.pageSize,filter:{sticky:0,essence:"yes"===this.threadEssence?1:0,attention:this.fromUserId||0}};var e=[];return(e=this.$route.query.search_ids||"1"===this.$route.query.search_ids?"string"==typeof this.$route.query.search_ids?[this.$route.query.search_ids]:this.$route.query.search_ids:[]).length>0&&(t.filter.categoryids=e),(this.threadType||0===this.threadType)&&(t.filter.types=[this.threadType]),(this.sort||0===this.sort)&&(t.filter.sort=this.sort),t},getThreadsSticky:function(){var t=this;this.threadsStickyData=[];var e={},n=[];(n=this.$route.query.search_ids||"1"===this.$route.query.search_ids?"string"==typeof this.$route.query.search_ids?[this.$route.query.search_ids]:this.$route.query.search_ids:[]).length>0&&(e.categoryids=n),y.a.readStickList({params:e}).then((function(data){t.threadsStickyData=Object(r.a)(data.Data)}))},getThreadsList:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.preThreadsData||!t.preThreadsData[t.pageNum]){e.next=6;break}n=t.preThreadsData[t.pageNum],t.preThreadsData=null,e.next=11;break;case 6:return t.preThreadsData=null,r=t.getThreadsParams(),e.next=10,y.a.readThreadList({params:r});case 10:n=e.sent;case 11:o=n.Data.pageData.map((function(t){var e=t;return e.id=t.thread.pid,e.attachment.length>0&&(e.attachment=e.attachment.filter((function(t){return t.thumbUrl}))),e})),t.handleThreadList(n.Data,o,"threadsData"),t.timer&&clearInterval(t.timer),t.timer=setInterval((function(){t.autoLoadThreads()}),3e4),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),t.handleError(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()},getCategoryList:function(){var t=this;y.a.readCategories().then((function(e){var n=Object(r.a)(e.Data)||[];t.categoryData=n;var o=[];n.forEach((function(t){o.push({id:t&&+t.pid,name:t.name}),t.children&&t.children.forEach((function(e){o.push({id:+e.pid,name:"".concat(t.name," - ").concat(e.name)})}))}));var c=o.find((function(e){return e.id===+t.categoryId}));c&&(t.title=c.name)}),(function(e){t.handleError(e)}))},loadMore:function(){this.getThreadsList()},autoLoadThreads:function(){var t=this,e=this.getThreadsParams();e.page=1,y.a.readThreadList({params:e}).then((function(data){if(data&&data.Data){var e=data&&data.Data&&data.Data.totalCount||0;t.threadCount>0&&(t.total=e-t.threadCount>0?e-t.threadCount:0)}}))},scrollDdata:function(){this.preLoadThreads()},reloadThreadsList:function(){this.pageNum=1,this.total=0,this.threadsData=[],this.preThreadsData=null,this.getThreadsList()},onChangeCategory:function(t){0!==t.id?this.$router.push({path:"/category/".concat(t.id),query:{search_ids:t.search_ids}}):this.$router.push("/")},onChangeFilter:function(t){this.preThreadsData=null,this.threadEssence="",this.fromUserId=0,"isEssence"===t?this.threadEssence="yes":"followed"===t&&(this.fromUserId=1),this.reloadThreadsList()},onChangeType:function(t){this.threadType=t,this.reloadThreadsList()},onChangeSort:function(t){this.sort="-createdAt"===t?2:"-updatedAt"===t?3:1,this.reloadThreadsList()},formatRichText:function(html){return d.a.parse(html)},audioPlay:function(t){this.currentAudioId&&this.currentAudioId!==t&&this.$refs["audio".concat(this.currentAudioId)]&&this.$refs["audio".concat(this.currentAudioId)].pause(),this.currentAudioId=t},showVideoFn:function(video){this.threadVideo=video,this.showVideoPop=!0}}},k=(n(1365),n(12)),component=Object(k.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("main",{staticClass:"cont-center"},[n("div",{staticClass:"cont-center-head"},[n("index-filter",{attrs:{"show-default":!1},on:{onChangeFilter:t.onChangeFilter,onChangeType:t.onChangeType,onChangeSort:t.onChangeSort}}),t._v(" "),t.threadsStickyData.length>0?n("div",t._l(t.threadsStickyData,(function(e,r){return n("div",{key:r,staticClass:"list-top-item"},[n("div",{staticClass:"top-label"},[t._v(t._s(t.$t("home.sticky")))]),t._v(" "),n("nuxt-link",{staticClass:"top-title",attrs:{to:"/thread/"+(e&&e.pid),target:"_blank"}},[n("span",{domProps:{innerHTML:t._s(t.$xss(t.formatRichText(e.title)))}})])],1)})),0):t._e(),t._v(" "),t.total>0?n("div",{staticClass:"new-post"},[n("div",{staticClass:"new-post-cont"},[t._v("\n          "+t._s(t.$t("home.hasNewContent",{total:t.total}))+"\n          "),n("span",{staticClass:"refresh",on:{click:t.reloadThreadsList}},[t._v("\n            "+t._s(t.$t("home.clickRefresh"))+"\n          ")])])]):t._e()],1),t._v(" "),t.isSpider?n("div",{staticClass:"post-list"},[t._l(t.threadsData,(function(e,r){return[4===e.type?n("post-items",{key:r,ref:"audio"+(e.thread&&e.thread.extension&&e.thread.extension.video&&e.thread.extension.video.pid),refInFor:!0,attrs:{item:e},on:{audioPlay:t.audioPlay}}):n("post-items",{key:r,attrs:{item:e}})]}))],2):n("dynamic-scroller",{attrs:{items:t.threadsData,"min-item-size":120,"page-mode":""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.item,o=e.index,c=e.active;return[n("dynamic-scroller-item",{attrs:{item:r,active:c,"data-index":o}},[4===r.thread.type?n("post-item-pays",{key:o,ref:"audio"+(r.thread&&r.thread.extension&&r.thread.extension.video&&r.thread.extension.video.pid),attrs:{item:r,lazy:!1},on:{audioPlay:t.audioPlay}}):n("post-item-pays",{key:o,attrs:{item:r,lazy:!1},on:{showVideoFn:t.showVideoFn}})],1)]}},{key:"after",fn:function(){return[n("list-load-more",{attrs:{loading:t.loading,"has-more":t.hasMore,"page-num":t.pageNum,length:t.threadsData.length},on:{loadMore:t.loadMore,scrollDdata:t.scrollDdata}})]},proxy:!0}])})],1),t._v(" "),n("aside",{staticClass:"cont-left"},[n("div",{staticClass:"category background-color"},[n("category-pays",{attrs:{list:t.categoryData},on:{onChange:t.onChangeCategory}})],1)]),t._v(" "),n("div",{staticClass:"cont-right"},[n("div",{staticClass:"background-color"},[n("advertising")],1),t._v(" "),n("div",{staticClass:"background-color"},[n("recommend-content",{attrs:{list:t.recommendContentData}})],1),t._v(" "),n("copyright",{attrs:{forums:t.forums}})],1),t._v(" "),t.showVideoPop?n("dplayer-pop",{attrs:{"cover-url":t.threadVideo.coverUrl,url:t.threadVideo.mediaUrl},on:{remove:function(e){t.showVideoPop=!1}}}):t._e()],1)}),[],!1,null,"d39aa5d4",null);e.default=component.exports;installComponents(component,{IndexFilter:n(1029).default,PostItems:n(1030).default,ListLoadMore:n(890).default,CategoryPays:n(1031).default,Advertising:n(948).default,RecommendUser:n(911).default,Copyright:n(949).default,PostItemPays:n(1032).default,RecommendContent:n(1033).default,DplayerPop:n(876).default})},874:function(t,e){t.exports={data:function(){return{title:"‎"}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},head:function(){return{title:"‎"!==this.title&&this.forums&&this.forums.set_site&&this.forums.set_site.site_name?"".concat(this.title," - ").concat(this.forums.set_site.site_name):this.title}}}},875:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return c}));n(66),n(209);var r=function(time){var t=((window.currentTime||new Date)-new Date(time))/1e3;return 0===parseInt(t)?"刚刚发布":parseInt(t)<60?"".concat(parseInt(t),"秒前"):parseInt(t/60)<60?"".concat(parseInt(t/60),"分钟前"):parseInt(t/60/60)<16?"".concat(parseInt(t/60/60),"小时前"):time.replace(/T/," ").replace(/Z/,"").substring(0,16)},o=function(t){var e=t-Math.round(new Date/1e3);return parseInt(e/86400,0)},c=function(t){var e=Math.round(new Date(t)/1e3),n=Math.round(new Date/1e3)-e,r=parseInt(n/86400,0);if(r>365){var o=parseInt(n/86400/365,0);return"".concat(o,"年")}return"".concat(r,"天")}},880:function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n},t.exports.default=t.exports,t.exports.__esModule=!0},881:function(t,e,n){},883:function(t,e,n){},885:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABCCAMAAADQfyDnAAAARVBMVEVHcEz/1t7/MF//M2D/TXL/YoH/d5H/NWP/8/X/2N/+HlX/H1b/+Pr/kqb/sb//NWL/197/W3z/fJX/5On/n7H/ydP/R22l4cNJAAAACnRSTlMAM4RE1sCo5g4grga5YgAAAxZJREFUWMOllol26yAMRPW6pR12vPz/pz6BDRbYTe3YPUmT2LoMIwmgD6Wg0iu9pwtYvtcfxCc03x5vP0T0tUUKiohuLpR3pHHweM+E9lY3WMbKkddRkG88fiqhPFafwhot7rRPZBlvJDRgJx/Vky68gPEgKj5gk4jNWDQOF0WqmADQSliN2RmQ/9sZO1+LZ0SbBiFOyYg4qHGEwlE2CqD4IAJRDRii9a5xpKSF/6gniHTl12yd4fioqjWtpdQQ0AhcVE/WDmYazGF9QQC+v1Q/QiYYPcyTcX6sNdEMQ0TdLNZn8u05Wq2tH+FG542LS7YhK1MCsgbZGqOezDA4Zy28dcPgpYfYA4g+mxJUwYVh9Dyutc5br43aNygdE9ZqCxyjo7OsIeop6LDvzw7w/SkKUKV4+Nl7HzxbYcIQ2lrZA5iw9YRKuWMVerZMMIyLVkxi6Vc6IIhlI8Vb452dOAthEstWKRQ6IEiZHD84rkRrg+5rKWugQ0JtWsdRSYBV3gYbxsjXGCWF6DcNyyDsGvIUNGfTeK2190a2Lf1GKEufikZxAtYMmpQXUSk4BkgNHBPVsMSjxEeHsgMQPdFQCJ7zb1wefwwclpjPPGg1AHHkYM6Em6KaNFuZ8oFuRTqqh6Vz18Jy3uc+jRP3J7aFj4hOzCJ94nbKMZYrQ09jKWp6TpCVnwjW5HyEkfXgqQeZ8IFml+UVQQejZ7l/PQUwoel+x+qzmyyhLpxEf2ool+MVJflvPS90M35tpp2G1QROg8srBAuZ5rrdEZ3TwO+pGhCTBifcJTqhQW4VKQsQhwk6Rag7dtonJrm94G8A/XxsRwWF7uRwBpAIUM1BTBwAiC5oQLOtLpsM0XkN/RnopIlVQz2cQR5D6BKhP8idV7BpwLainynlnZPdafeCgpWA7uQMukJ4iFoqLtJVQnMEuTaFQkBzYKPrhKYergIEYcklrgLo36PtK3qFIE5BLwDSLLaDIl4ALLMAXp1C9eEGgAmX23lPgFKXS3mXi5enIHygGwTcA6wa6BYBuAXIGugewd0EMIHuEv4DyXJgDPfCK6IAAAAASUVORK5CYII="},888:function(t,e,n){var r=n(896),o=n(897),c=n(898),d=n(899);t.exports=function(t){return r(t)||o(t)||c(t)||d()},t.exports.default=t.exports,t.exports.__esModule=!0},889:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWBAMAAAA2mnEIAAAALVBMVEX5rD75rD75rD75rD75rD75rD/5rD/5rD/5rD75rD/5rD75rD/5rD/5rD/5rD5fyIAMAAAADnRSTlMCkdkQMMNUIvFFg+WsZNscE4cAAADBSURBVBjTY2BgYGAReqfowAAGbF0ODCwrEsDsQOYcpWMGoiAm0wS5d+/ePeRUALIjrd+BwOapQNUC+ybse/fO8jVjAgMH47tmi3fPLd4JNDB42b17xP7Oed+7x0sYRPLevQsoYXr37pkjg8K5d+/eMMQBCSaGB3rvdO8y37307hEfiC1ezlBeA2ID1TwNNQ+NA6kB6l0AtJELpBdo5rt35kAMNBNoF4QNtAvohnfvPN+9A7kB2W0obkb2C4of4X4HAPLQaUz8SV+2AAAAAElFTkSuQmCC"},892:function(t,e,n){},896:function(t,e,n){var r=n(880);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0},897:function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},898:function(t,e,n){var r=n(880);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},899:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},900:function(t,e,n){"use strict";n(881)},904:function(t,e,n){"use strict";n.r(e);var r={name:"UserItem",props:{item:{type:Object,default:function(){}},show:{type:String,default:"all"},isFollow:{type:Boolean,default:!1}},data:function(){return{}},methods:{toUser:function(){this.$router.push("/user/".concat(this.item.id))}}},o=(n(900),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-item-container",class:{simple:"simple"===t.show}},[n("div",{staticClass:"flex user-item",on:{click:function(e){return e.stopPropagation(),t.toUser(e)}}},[n("avatar",{attrs:{user:t.item,size:"simple"===t.show?40:45,round:!0}}),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"flex"},[n("span",{staticClass:"name text-hidden"},[t._v(t._s(t.item.username))]),t._v(" "),"all"===t.show&&t.item.groupName?n("span",{staticClass:"role"},[t._v(t._s(t.item.groupName))]):t._e()]),t._v(" "),n("div",{staticClass:"flex count"},["all"===t.show?n("div",{staticClass:"count-item"},[t._v(t._s(t.$t("profile.topic"))+" "+t._s(t.item.threadCount||0))]):t._e(),t._v(" "),"all"===t.show?n("div",{staticClass:"count-item"},[t._v(t._s(t.$t("profile.following"))+" "+t._s(t.item.followCount||0))]):t._e(),t._v(" "),n("div",{staticClass:"count-item"},[t._v(t._s(t.$t("profile.followers"))+" "+t._s(t.item.fansCount||0))])])])],1),t._v(" "),t.isFollow?n("el-button",{staticClass:"follow",attrs:{type:"text"}},[t._v("\n    "+t._s(t.$t("profile.following"))+"\n  ")]):t._e()],1)}),[],!1,null,"ee325c6e",null);e.default=component.exports;installComponents(component,{Avatar:n(344).default})},910:function(t,e,n){"use strict";n(883)},911:function(t,e,n){"use strict";n.r(e);n(14),n(32);var r=n(873),o={name:"RecommendUser",mixins:[n.n(r).a],props:{list:{type:Array,default:function(){return[]}}},data:function(){return{userList:[],loading:!1,pageNum:1,pageSize:4}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},watch:{list:{handler:function(t){this.userList=t},deep:!0}},mounted:function(){0===this.list.length?this.getList():this.userList=this.list},methods:{getList:function(){var t=this;this.userList=[],this.loading=!0;var e={include:"groups",limit:this.pageSize};this.$store.dispatch("jv/get",["users/recommended",{params:e}]).then((function(e){var data=e;e&&Array.isArray(e)&&data.forEach((function(t,i){data[i].groupName=t.groups[0]?t.groups[0].name:""})),t.userList=data}),(function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},refresh:function(){this.getList()}}},c=(n(910),n(12)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"recommend-user-container"},[n("div",{staticClass:"recommend-user-title"},[t._v(t._s(t.$t("home.recommentUser")))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"recommend-user-list"},[t._l(t.userList,(function(t,e){return n("user-item",{key:e,attrs:{item:t,show:"simple"}})})),t._v(" "),0===t.userList.length?n("div",{staticClass:"no-more"},[t._v(t._s(t.$t("discuzq.list.noData")))]):t._e()],2),t._v(" "),n("div",{staticClass:"refresh",on:{click:t.refresh}},[n("svg-icon",{staticClass:"icon",attrs:{type:"refresh"}}),t._v("\n    "+t._s(t.$t("home.refresh"))+"\n  ")],1)])}),[],!1,null,"00b4b6a3",null);e.default=component.exports;installComponents(component,{UserItem:n(904).default,SvgIcon:n(78).default})},913:function(t,e,n){},914:function(t,e,n){},915:function(t,e,n){},916:function(t,e,n){},917:function(t,e,n){},918:function(t,e,n){},919:function(t,e,n){},943:function(t,e,n){"use strict";n.r(e);var r={name:"ProductItem",props:{item:{type:Object,default:function(){}}},data:function(){return{}}},o=(n(976),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.item?n("a",{staticClass:"product-container",attrs:{href:t.item.detailContent,target:"_blank",el:"nofollow"}},[n("el-image",{staticClass:"image",attrs:{src:t.item.imagePath,alt:t.item.title,fit:"cover"}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[n("i",{staticClass:"el-icon-loading"})])]),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"info-header"},[n("div",{staticClass:"title"},[t._v(t._s(t.item.title))]),t._v(" "),t.item.price>0?n("div",{staticClass:"price"},[t._v(t._s(t.$t("post.yuanItem")+t.item.price+t.$t("post.yuan")))]):t._e()]),t._v(" "),n("div",{staticClass:"btn"},[n("svg-icon",{staticClass:"icon",attrs:{type:"product-icon"}}),t._v(t._s(t.$t("post.buyProudct")))],1)])],1):t._e()}),[],!1,null,"2fed8472",null);e.default=component.exports;installComponents(component,{SvgIcon:n(78).default})},950:function(t,e,n){"use strict";n(892)},956:function(t,e,n){"use strict";n.r(e);var r=n(208),o={name:"CreatePostPopover",mixins:[n.n(r).a],data:function(){return{userId:this.$store.getters["session/get"]("userId"),visible:!1,noCreateThread:!1,can_create_thread:!0,can_create_thread_long:!0,can_create_thread_video:!0,can_create_thread_image:!0,can_create_thread_question:!0,can_create_thread_goods:!0,can_create_thread_ask:!0}},computed:{userInfo:function(){return this.$store.getters["jv/get"]("/users/".concat(this.userId))},forums:function(){return this.$store.state.site.info.attributes||{}},categoryId:function(){return this.$route.query.categoryId},types:function(){return this.$route.query.url},www:function(){return this.$route.path}},methods:{showAndHidePopover:function(){var t=this;if(this.$store.getters["session/get"]("isLogin")){if(!this.visible){var e=this.forums.other,n=this.userInfo;if(!e)return;if(!(e.can_create_thread||e.can_create_thread_long||e.can_create_thread_video||e.can_create_thread_image||e.can_create_thread_question||e.can_create_thread_goods||e.can_create_thread_ask))return this.$message.error(this.$t("home.noPostingPermission")),void this.$router.push("/my/vip");if(e.publish_need_real_name&&!n.realname)return void this.$message.error(this.$t("home.needRealname"));if(e.publish_need_bind_phone&&!n.mobile)return void this.$message.error(this.$t("home.needPhone"));if(!e.can_create_thread_in_category)return void this.$message.error(this.$t("home.noPostingCategory"));if(this.categoryId)this.$store.getters["jv/get"]("categories/".concat(this.categoryId)).canCreateThread||this.$message.error(this.$t("home.noPostingCategory"));e.can_create_thread||(this.can_create_thread=!1),e.can_create_thread_long||(this.can_create_thread_long=!1),e.can_create_thread_video||(this.can_create_thread_video=!1),e.can_create_thread_image||(this.can_create_thread_image=!1),e.can_create_thread_question||(this.can_create_thread_question=!1),e.can_create_thread_goods||(this.can_create_thread_goods=!1),e.can_create_thread_ask||(this.can_create_thread_ask=!1)}this.visible=!this.visible}else this.$message.warning("请登录"),window.setTimeout((function(){t.headerTologin()}),1e3)},toRouter:function(t){this.$router.push("/thread/postpay?type=".concat(t).concat(this.categoryId?"&categoryId=".concat(this.categoryId):""))}}},c=(n(950),n(12)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-popover",{attrs:{placement:"bottom",width:"120","min-width":"120",trigger:"manual","popper-class":"custom-popover-width"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("ul",{staticClass:"type-container"},[t.can_create_thread?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(0)}}},[t._v("\n        "+t._s(t.$t("home.word"))+"\n      ")]):t._e(),t._v(" "),t.can_create_thread_long?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(1)}}},[t._v("\n        "+t._s(t.$t("home.invitation"))+"\n      ")]):t._e(),t._v(" "),t.can_create_thread_image?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(3)}}},[t._v("\n        "+t._s(t.$t("home.picture"))+"\n      ")]):t._e(),t._v(" "),t.can_create_thread_video?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(2)}}},[t._v("\n        "+t._s(t.$t("home.video"))+"\n      ")]):t._e(),t._v(" "),t.can_create_thread_question?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(5)}}},[t._v("\n        "+t._s(t.$t("home.question"))+"\n      ")]):t._e(),t._v(" "),t.can_create_thread_goods?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(6)}}},[t._v("\n        "+t._s(t.$t("home.product"))+"\n      ")]):t._e(),t._v(" "),t.can_create_thread_ask?n("li",{on:{click:function(e){return e.stopPropagation(),t.toRouter(14)}}},[t._v("\n        "+t._s(t.$t("home.ask"))+"\n      ")]):t._e()]),t._v(" "),n("template",{slot:"reference"},[t._t("button",[n("el-button",{staticClass:"new-post",attrs:{type:"primary"},on:{click:t.showAndHidePopover}},[t._v("\n          \n          \n          "+t._s(t.$t("profile.post"))),n("span",{staticClass:"add-icon"},[t._v("+")])])])],2)],2)],1)}),[],!1,null,"b4f15e32",null);e.default=component.exports},964:function(t,e,n){"use strict";var strong=n(346),r=n(211);t.exports=n(345)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return strong.def(r(this,"Set"),t=0===t?0:t,t)}},strong)},973:function(t,e,n){var r=n(888);t.exports={methods:{handleThreadList:function(t,data,e){if(Array.isArray(data)){this.newData=t,this.hasMore=t.currentPage<t.totalPage;var n=r(data);1===this.pageNum&&this.threadIdSet.clear();for(var i=0;i<n.length;i++)n[i]&&n[i].thread.pid&&(this.threadIdSet.has(n[i].thread.pid)?(n.splice(i,1),i--):this.threadIdSet.add(n[i].thread.pid));this.threadCount=t.totalCount||0,1===this.pageNum?this[e]=n:this[e]=[].concat(r(this[e]),r(n)),t&&(this.hasMore=t.currentPage<t.totalPage),this.pageNum+=1}}}}},974:function(t,e,n){"use strict";n(913)},975:function(t,e,n){"use strict";n(914)},976:function(t,e,n){"use strict";n(915)},979:function(t,e,n){"use strict";n(916)},980:function(t,e,n){"use strict";n(917)},981:function(t,e,n){"use strict";n(918)},982:function(t,e,n){"use strict";n(919)}}]);